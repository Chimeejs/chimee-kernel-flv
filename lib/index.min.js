!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.chimeeKernelFlv=t():e.chimeeKernelFlv=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=77)}([function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(1),r=n(0),o=n(17),a=n(9),s=n(11),u=function(e,t,n){var c,f,l,d=e&u.F,h=e&u.G,v=e&u.S,p=e&u.P,m=e&u.B,y=e&u.W,g=h?r:r[t]||(r[t]={}),b=g.prototype,_=h?i:v?i[t]:(i[t]||{}).prototype;h&&(n=t);for(c in n)(f=!d&&_&&void 0!==_[c])&&s(g,c)||(l=f?_[c]:n[c],g[c]=h&&"function"!=typeof _[c]?n[c]:m&&f?o(l,i):y&&_[c]==l?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((g.virtual||(g.virtual={}))[c]=l,e&u.R&&b&&!b[c]&&a(b,c,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var i=n(36)("wks"),r=n(25),o=n(1).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t,n){"use strict";function i(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++g.count);var i=n+"_"+t,r=g[i];return r||(r=g[i]=[]),r}function r(e,t,n){var r=m()(null);r.type=t,r.target=e,n&&v()(r,Object(y.r)(n)?n:{data:n}),i(e,t).forEach(function(t){(t[1]||t[0]).apply(e,[r])})}function o(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments[4];Object(y.l)(r)&&!o&&(o=r,r=void 0);var s=[n,void 0,r];r&&!o&&(o=function(){a(e,t,n,r);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];n.apply(e,o)}),o&&(s[1]=o),i(e,t).push(s)}function a(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=i(e,t);if(n||r){var a=-1,s=void 0;return o.find(function(e,t){if((!n||e[0]===n)&&(!r||e[2]))return a=t,s=e[1],!0}),-1!==a&&o.splice(a,1),s}o.length=0}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"emitEventCache",function(){return r}),n.d(t,"addEventCache",function(){return o}),n.d(t,"removeEventCache",function(){return a}),n.d(t,"CustEvent",function(){return b});var s=n(28),u=n.n(s),c=n(41),f=n.n(c),l=n(42),d=n.n(l),h=n(56),v=n.n(h),p=n(107),m=n.n(p),y=n(13),g=m()(null);g.count=0;var b=function(){function e(t,n){var i=this;if(f()(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==(void 0===t?"undefined":u()(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach(function(e){t[e]=i[e]})}}return d()(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return r(this.__target,e,{data:t}),this}}]),e}()},function(e,t,n){var i=n(7),r=n(48),o=n(32),a=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(8);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(5),r=n(18);e.exports=n(6)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(51),r=n(23);e.exports=function(e){return i(r(e))}},function(e,t,n){"use strict";function i(e){return void 0!==e}function r(e){return void 0===e||null===e}function o(e){return Array.isArray(e)}function a(e){return"function"==typeof e}function s(e){return Object(e)===e&&"[object Object]"===String(e)&&!a(e)&&!o(e)}function u(e){return"number"==typeof e}function c(e){return!o(e)&&e-I()(e)+1>=0}function f(e){return C()(e)}function l(e){return o(e)?0===e.length:s(e)?0===D()(e).length:!e}function d(e){return e instanceof Event||(e&&e.originalEvent)instanceof Event}function h(e){return e instanceof Blob}function v(e){return h(e)&&m(e.name)}function p(e){return"[object Date]"===Object.prototype.toString.call(e)}function m(e){return"string"==typeof e||e instanceof String}function y(e){return"boolean"==typeof e}function g(e){return!!e&&("object"===(void 0===e?"undefined":R()(e))||"function"==typeof e)&&"function"==typeof e.then}function b(e){return r(e)||y(e)||m(e)||u(e)}function _(e){return m(e)&&!!e.match(/^((https?|ftp|rtsp|mms):\/\/)(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6}|localhost)(:[0-9]{1,4})?((\/?)|(\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/i)}function w(e){return!!("object"===("undefined"==typeof Node?"undefined":R()(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":R()(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}function k(e){return!!("object"===("undefined"==typeof HTMLElement?"undefined":R()(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":R()(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)}function S(e,t){return!(!w(e)||!w(t))&&t.parentNode===e}function E(e,t){if(!w(e)||!w(t))return!1;for(;t.parentNode;)if((t=t.parentNode)===e)return!0;return!1}function x(e){return/<[^>]+?>/.test(e)}function T(e){return e instanceof Error}function O(e){return e instanceof RegExp}n.d(t,"a",function(){return i}),n.d(t,"y",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"l",function(){return a}),n.d(t,"r",function(){return s}),n.d(t,"p",function(){return u}),n.d(t,"q",function(){return c}),n.d(t,"n",function(){return f}),n.d(t,"h",function(){return l}),n.d(t,"j",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"k",function(){return v}),n.d(t,"f",function(){return p}),n.d(t,"w",function(){return m}),n.d(t,"d",function(){return y}),n.d(t,"u",function(){return g}),n.d(t,"t",function(){return b}),n.d(t,"x",function(){return _}),n.d(t,"o",function(){return w}),n.d(t,"g",function(){return k}),n.d(t,"e",function(){return S}),n.d(t,"s",function(){return E}),n.d(t,"m",function(){return x}),n.d(t,"i",function(){return T}),n.d(t,"v",function(){return O});var A=n(28),R=n.n(A),M=n(57),D=n.n(M),B=n(113),C=n.n(B),L=n(117),I=n.n(L)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ERRORNO={NET_ERROR:100,CODEC_ERROR:101,CANNOT_SEEK:102,ENDOFSTREAM_ERROR:103,MEDIASOURCE_ERROR:104,SOURCEBUFFER_ERROR:105,SBABORT_ERROR:106,APPENDBUFFER_ERROR:107}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PLAYER_EVENTS={LOADER_OPEN:"loader-open",LOADER_CHUNK_ARRIVAL:"loader-chunk-arrival",MEDIA_DEMUX_FLV:"media-demux-flv",MEDIA_SEGMENT_INIT:"media-segment-init",MEDIA_INFO:"media-info",MEDIA_SEGMENT:"media-segment",PLAYING:"playing",CANPLAY:"canplay",TIMEUPDATE:"timeupdate"}},function(e,t){e.exports=!0},function(e,t,n){var i=n(24);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports={}},function(e,t,n){var i=n(50),r=n(37);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(23);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(5).f,r=n(11),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(80),o=i(r),a=n(91),s=i(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){"use strict";var i=n(82)(!0);n(47)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(8),r=n(1).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(8);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(7),r=n(84),o=n(37),a=n(35)("IE_PROTO"),s=function(){},u=function(){var e,t=n(31)("iframe"),i=o.length;for(t.style.display="none",n(52).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;i--;)delete u.prototype[o[i]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(30),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(36)("keys"),r=n(25);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(0),r=n(1),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(16)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(3)},function(e,t,n){var i=n(1),r=n(0),o=n(16),a=n(38),s=n(5).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(101),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){"use strict";function i(e,t){if(!Object(f.w)(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+(void 0===e?"undefined":c()(e)));return Object(f.w)(t)?"["+(e=l.FORCE_GLOBAL_TAG?l.GLOBAL_TAG:e||l.GLOBAL_TAG)+"] > "+t:"["+l.GLOBAL_TAG+"] > "+e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),o=n.n(r),a=n(42),s=n.n(a),u=n(28),c=n.n(u),f=n(13),l=function(){function e(){o()(this,e)}return s()(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,i(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log).call(console,i(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log).call(console,i(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log).call(console,i(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(i(t,n))}}]),e}();l.GLOBAL_TAG="chimee",l.FORCE_GLOBAL_TAG=!1,l.ENABLE_ERROR=!0,l.ENABLE_INFO=!0,l.ENABLE_WARN=!0,l.ENABLE_DEBUG=!0,l.ENABLE_VERBOSE=!0,t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){i(this,e),this.type=t};t.default=r},function(e,t,n){e.exports={default:n(143),__esModule:!0}},function(e,t,n){"use strict";function i(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=r(t),this.reject=r(n)}var r=n(24);e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var i=n(16),r=n(2),o=n(49),a=n(9),s=n(19),u=n(83),c=n(26),f=n(87),l=n(3)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,v,p,m,y){u(n,t,v);var g,b,_,w=function(e){if(!d&&e in x)return x[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",S="values"==p,E=!1,x=e.prototype,T=x[l]||x["@@iterator"]||p&&x[p],O=T||w(p),A=p?S?w("entries"):O:void 0,R="Array"==t?x.entries||T:T;if(R&&(_=f(R.call(new e)))!==Object.prototype&&_.next&&(c(_,k,!0),i||"function"==typeof _[l]||a(_,l,h)),S&&T&&"values"!==T.name&&(E=!0,O=function(){return T.call(this)}),i&&!y||!d&&!E&&x[l]||a(x,l,O),s[t]=O,s[k]=h,p)if(g={values:S?O:w("values"),keys:m?O:w("keys"),entries:A},y)for(b in g)b in x||o(x,b,g[b]);else r(r.P+r.F*(d||E),t,g);return g}},function(e,t,n){e.exports=!n(6)&&!n(10)(function(){return 7!=Object.defineProperty(n(31)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=n(9)},function(e,t,n){var i=n(11),r=n(12),o=n(85)(!1),a=n(35)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),u=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;t.length>u;)i(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var i=n(21);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){var i=n(1).document;e.exports=i&&i.documentElement},function(e,t,n){n(88);for(var i=n(1),r=n(9),o=n(19),a=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],f=i[c],l=f&&f.prototype;l&&!l[a]&&r(l,a,c),o[c]=o.Array}},function(e,t,n){var i=n(50),r=n(37).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t){},function(e,t,n){e.exports={default:n(104),__esModule:!0}},function(e,t,n){e.exports={default:n(110),__esModule:!0}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(123),c=i(u),f=n(125),l=i(f),d=n(126),h=i(d),v=n(127),p=i(v),m=n(4),y=n(15),g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.loader=null,n.config={},n.config=e||{},n.bufferSize=3145728,n.cacheBuffer=new ArrayBuffer(n.bufferSize),n.cacheRemain=0,n.stashByteStart=0,n.enableStash=!0,n.stashSize=n.config.stashSize||393216,n.resumeFrom=0,n.currentRange={},n.totalReceive=0,n.seekPonit=void 0,n.timer=null,n.heartBeatInterval=null,n.preTotalReceive=0,n.seekLock=!1,n.webSocketURLReg=/wss?:\/\/(.+?)/,n.selectLoader(),n.bindEvent(),n}return a(t,e),s(t,[{key:"selectLoader",value:function(){var e=this.config,t=this.config.src;this.webSocketURLReg.test(t)?this.loader=new h.default(t,e,this.queryHandle):c.default.isSupport()?this.loader=new c.default(t,e,this.queryHandle):p.default.isSupport()?this.loader=new p.default(t,e,this.queryHandle):l.default.isSupport()&&(this.loader=new l.default(t,e,this.queryHandle)),this.loader.arrivalDataCallback=this.onLoaderChunkArrival.bind(this)}},{key:"bindEvent",value:function(){var e=this;this.loader.on("end",function(){var t=e.cacheBuffer.slice(0,e.cacheRemain);e.arrivalDataCallback(t,e.stashByteStart),e.emit("end")}),["error","performance"].forEach(function(t){e.loader.on(t,function(n){e.emit(t,n.data)})})}},{key:"unbindEvent",value:function(){this.loader.off("end"),this.loader.off("error"),this.loader.off("performance")}},{key:"onLoaderChunkArrival",value:function(e,t,n){if(void 0===this.startReceiveTime&&(this.startReceiveTime=Date.now()),(!this.seekLock||void 0!==n)&&(void 0!==n&&(this.seekPonit=n,this.seekLock=!1),this.arrivalDataCallback))if(this.emit("player-event",{type:y.PLAYER_EVENTS.LOADER_CHUNK_ARRIVAL,byteLength:e.byteLength,ts:Date.now()}),this.totalReceive+=e.byteLength,0===this.cacheRemain&&0===this.stashByteStart&&(this.stashByteStart=t),this.cacheRemain+e.byteLength<=this.stashSize){var i=new Uint8Array(this.cacheBuffer,0,this.stashSize);i.set(new Uint8Array(e),this.cacheRemain),this.cacheRemain+=e.byteLength}else{this.startReceiveTime&&(this.emit("performance",{type:"first-flv-package-duration",value:Date.now()-this.startReceiveTime}),this.startReceiveTime=void 0);var r=new Uint8Array(this.cacheBuffer,0,this.bufferSize);if(this.cacheRemain>0){var o=this.cacheBuffer.slice(0,this.cacheRemain),a=0,s=Date.now();if(void 0!==this.seekPonit?(a=this.arrivalDataCallback(o,this.stashByteStart,this.seekPonit),this.seekPonit=void 0):a=this.arrivalDataCallback(o,this.stashByteStart),this.emit("performance",{type:"first-flv-to-mp4",value:Date.now()-s}),a<o.byteLength){if(a>0){var u=new Uint8Array(o,a);r.set(u,0),this.cacheRemain=u.byteLength,this.stashByteStart+=a}}else this.cacheRemain=0,this.stashByteStart+=a;this.cacheRemain+e.byteLength>this.bufferSize&&(this.expandBuffer(this.cacheRemain+e.byteLength),r=new Uint8Array(this.cacheBuffer,0,this.bufferSize)),r.set(new Uint8Array(e),this.cacheRemain),this.cacheRemain+=e.byteLength}else{var c=0,f=Date.now();if(void 0!==this.seekPonit?(c=this.arrivalDataCallback(e,t,this.seekPonit),this.seekPonit=void 0):c=this.arrivalDataCallback(e,t),this.emit("performance",{type:"first-flv-to-mp4",value:Date.now()-f}),c<e.byteLength){var l=e.byteLength-c;l>this.bufferSize&&(this.expandBuffer(l),r=new Uint8Array(this.cacheBuffer,0,this.bufferSize)),r.set(new Uint8Array(e,c),0),this.cacheRemain+=l,this.stashByteStart=t+c}}}}},{key:"initCacheBuffer",value:function(){this.cacheRemain=0,this.totalReceive=0,this.cacheBuffer=new ArrayBuffer(this.bufferSize)}},{key:"expandBuffer",value:function(e){var t=this.bufferSize;t<e&&(t=e),this.cacheBuffer=new ArrayBuffer(t),this.bufferSize=t}},{key:"pause",value:function(){this.loader.pause()}},{key:"open",value:function(e,t){this.emit("player-event",{type:y.PLAYER_EVENTS.LOADER_OPEN,ts:Date.now()}),this.loader.open({from:e||0,to:-1},t),this.heartbeat()}},{key:"heartbeat",value:function(){var e=this;clearInterval(this.heartBeatInterval),this.heartBeatInterval=setInterval(function(){e.emit("heartbeat",{speed:e.totalReceive-e.preTotalReceive,totalReceive:e.totalReceive}),e.preTotalReceive=e.totalReceive},1e3)}},{key:"resume",value:function(){this.paused=!1;var e=this.totalReceive;this.open(e)}},{key:"seek",value:function(e,t,n){this.seekLock=!0,this.totalReceive=e,this.preTotalReceive=e,this.initCacheBuffer(),this.cacheRemain=0,this.stashByteStart=0,this.open(e,n)}},{key:"destroy",value:function(){this.pause(),this.initCacheBuffer(),window.clearInterval(this.heartBeatInterval),this.heartBeatInterval=null,this.unbindEvent()}}]),t}(m.CustEvent);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},n=void 0;return n=-1!==e.to?"bytes="+e.from.toString()+"-"+e.to.toString():"bytes="+e.from.toString()+"-",t.Range=n,{headers:t}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(129),c=i(u),f=n(62),l=i(f),d=n(64),h=i(d),v=n(135),p=i(v),m=n(4),y=n(44),g=(i(y),function(){function e(t){a(this,e),h.default.init(),this._config=t,this.onInitSegment=null,this.onMediaSegment=null,this.onMediaInfo=null,this.seekCallBack=null,this._onCdnDropFrame=null,this.loadmetadata=!1,this.ftyp_moov=null,this._tagdemux=new l.default,this._flvparse=new c.default,this.ftyp_moov_v=null,this.ftyp_moov_a=null,this.metaSuccRun=!1,this.metas=[],this.parseChunk=null,this.hasVideo=!1,this.hasAudio=!1,this._error=null,this._pendingResolveSeekPoint=-1,this._tempBaseTime=0,this.setflvBase=this.setflvBasefrist,this._tagdemux._onTrackMetadata=this.Metadata.bind(this),this._tagdemux._onMediaInfo=this.metaSucc.bind(this),this._tagdemux._onDataAvailable=this.onDataAvailable.bind(this),this._tagdemux._onError=this.error.bind(this),this._tagdemux._onCdnDropFrame=this.onCdnDropFrame.bind(this),this.m4mof=new p.default(this._config),this.m4mof.onMediaSegment=this.onMdiaSegment.bind(this)}return s(e,[{key:"seek",value:function(e){this._flvparse.dispose(),this.setflvBase=this.setflvBasefrist,void 0!=e&&0!=e||(e=0,this._pendingResolveSeekPoint=-1),this._tempBaseTime!=e&&(this._tempBaseTime=e,this._tagdemux._timestampBase=e,this.m4mof.seek(e),this.m4mof.insertDiscontinuity(),this._pendingResolveSeekPoint=e)}},{key:"setflvBasefrist",value:function(e,t){var n=0;try{n=this._flvparse.setFlv(new Uint8Array(e))}catch(e){this.error(e)}if(0==this._flvparse.arrTag.length)return n;if(this._flvparse.arrTag.length>0){this._tagdemux.hasAudio=this.hasAudio=this._flvparse._hasAudio,this._tagdemux.hasVideo=this.hasVideo=this._flvparse._hasVideo,0!=this._tempBaseTime&&this._tempBaseTime==this._flvparse.arrTag[0].getTime()&&(this._tagdemux._timestampBase=0);try{this._tagdemux.moofTag(this._flvparse.arrTag)}catch(e){this.error(e)}this.setflvBase=this.setflvBaseUsually}return n}},{key:"setflvBaseUsually",value:function(e,t){var n=0;try{n=this._flvparse.setFlv(new Uint8Array(e))}catch(e){this.error(e)}if(this._flvparse.arrTag.length>0)try{this._tagdemux.moofTag(this._flvparse.arrTag)}catch(e){this.error(e)}return n}},{key:"onMdiaSegment",value:function(e,t){if(this.onMediaSegment&&this.onMediaSegment(e,new Uint8Array(t.data)),-1!=this._pendingResolveSeekPoint&&"video"==e){var n=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=-1,this.seekCallBack&&this.seekCallBack(n)}}},{key:"Metadata",value:function(e,t){switch(e){case"video":if(this.metas.push(["video",t]),this.m4mof._videoMeta=t,this.hasVideo&&!this.hasAudio)return void this.metaSucc();break;case"audio":if(this.metas.push(["audio",t]),this.m4mof._audioMeta=t,!this.hasVideo&&this.hasAudio)return void this.metaSucc()}this.hasVideo&&this.hasAudio&&this.m4mof._videoMeta&&this.m4mof._audioMeta&&this.metaSucc()}},{key:"metaSucc",value:function(e){var t=this;if(this.onMediaInfo&&e&&this.onMediaInfo(e||this._tagdemux._mediaInfo,{hasAudio:this.hasAudio,hasVideo:this.hasVideo}),0==this.metas.length)return void(this.metaSuccRun=!0);e||(this.metas.length>1?this.metas.map(function(e){"video"==e[0]?t.ftyp_moov_v=h.default.generateInitSegment([e[1]]):t.ftyp_moov_a=h.default.generateInitSegment([e[1]])}):this.ftyp_moov=h.default.generateInitSegment([this.metas[0][1]]),this.onInitSegment&&0==this.loadmetadata&&(this.ftyp_moov?this.onInitSegment(this.ftyp_moov):this.onInitSegment(this.ftyp_moov_v,this.ftyp_moov_a),this.loadmetadata=!0))}},{key:"onDataAvailable",value:function(e,t){try{this.m4mof.remux(e,t)}catch(e){this.error(e)}}},{key:"onCdnDropFrame",value:function(e){this._onCdnDropFrame&&this._onCdnDropFrame(e)}},{key:"setflv",value:function(e,t){return this.setflvBase(e,t)}},{key:"setflvloc",value:function(e){c.default.setFlv(new Uint8Array(e));if(c.default.arrTag.length>0)return c.default.arrTag}},{key:"error",value:function(e){this._error&&this._error(e)}}]),e}()),b=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.f2m=new g(e),n.f2m._error=n.error.bind(n),n._onInitSegment=null,n._onMediaSegment=null,n._onMediaInfo=null,n._seekCallBack=null,n}return o(t,e),s(t,[{key:"error",value:function(e){this.emit("error",e.type)}},{key:"seek",value:function(e){this.f2m.seek(e)}},{key:"setflv",value:function(e){return this.f2m.setflv(e,0)}},{key:"setflvloc",value:function(e){return this.f2m.setflvloc(e)}},{key:"onInitSegment",set:function(e){this._onInitSegment=e,this.f2m.onInitSegment=e}},{key:"onMediaSegment",set:function(e){this._onMediaSegment=e,this.f2m.onMediaSegment=e}},{key:"onMediaInfo",set:function(e){this._onMediaInfo=e,this.f2m.onMediaInfo=e}},{key:"seekCallBack",set:function(e){this._seekCallBack=e,this.f2m.seekCallBack=e}},{key:"onCdnDropFrame",set:function(e){console.log("set fun"),this.f2m._onCdnDropFrame=e}}]),t}(m.CustEvent);t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(131),u=i(s),c=n(134),f=i(c),l=n(63),d=i(l),h=n(44),v=i(h),p=function(){function e(){r(this,e),this.TAG=this.constructor.name,this._config={},this._onError=null,this._onMediaInfo=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._onCdnDropFrame=null,this._dataOffset=0,this._firstParse=!0,this._dispatch=!1,this._hasAudio=!1,this._hasVideo=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new f.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._videoTrack={type:"video",id:1,sequenceNumber:0,addcoefficient:2,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,addcoefficient:2,samples:[],length:0},this._littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),this._timeInfo={aacFirstDts:0,aacCurrentDtsOffset:0,aacCurrentFixedLen:0,aacFixedRecord:[],avcSampleDuration:40,avcLastDts:0,avcLastPts:0}}return a(e,[{key:"onMediaInfo",value:function(e){this._onMediaInfo=e}},{key:"parseFirstTimeStamp",value:function(e){this._mediaInfo.beginTimeStamp||(this._mediaInfo.beginTimeStamp=e.getTime(),this._mediaInfo.audioCodec&&this._mediaInfo.videoCodec&&this._onMediaInfo(this._mediaInfo))}},{key:"parseMetadata",value:function(e){var t=u.default.parseMetadata(e);this._mediaInfo.metadata&&(this._mediaInfo.metadata=t.onMetaData,this._onMediaInfo(this._mediaInfo)),this._parseScriptData(t)}},{key:"_parseScriptData",value:function(e){var t=e;if(t.hasOwnProperty("onMetaData")){this._metadata,this._metadata=t;var n=this._metadata.onMetaData;if("boolean"==typeof n.hasAudio&&(this._hasAudio=n.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof n.hasVideo&&(this._hasVideo=n.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof n.audiodatarate&&(this._mediaInfo.audioDataRate=n.audiodatarate),"number"==typeof n.videodatarate&&(this._mediaInfo.videoDataRate=n.videodatarate),"number"==typeof n.width&&(this._mediaInfo.width=n.width),"number"==typeof n.height&&(this._mediaInfo.height=n.height),"number"==typeof n.duration){if(!this._durationOverrided){var i=Math.floor(n.duration*this._timescale);this._duration=i,this._mediaInfo.duration=i}}else this._mediaInfo.duration=0;if("number"==typeof n.framerate){var r=Math.floor(1e3*n.framerate);if(r>0){var a=r/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=a,this._referenceFrameRate.fps_num=r,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=a,this._timeInfo.avcSampleDuration=Math.ceil(1e3/this._mediaInfo.fps)||40}}if("object"===o(n.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var s=n.keyframes;s.times=n.times,s.filepositions=n.filepositions,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(s),n.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;return this._dispatch=!1,this._mediaInfo.metadata=n,console.log(this.TAG,"Parsed onMetaData"),this._mediaInfo}}},{key:"_parseKeyframesIndex",value:function(e){for(var t=[],n=[],i=1;i<e.times.length;i++){var r=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(r),n.push(e.filepositions[i])}return{times:t,filepositions:n}}},{key:"moofTag",value:function(e){for(var t=0;t<e.length;t++)this._dispatch=!0,this.parseChunks(e[t]);this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack)}},{key:"parseChunks",value:function(e){switch(e.tagType){case 8:this._parseAudioData(e.body.buffer,0,e.body.length,e.getTime()),this.parseFirstTimeStamp(e);break;case 9:this._parseVideoData(e.body.buffer,0,e.body.length,e.getTime(),0),this.parseFirstTimeStamp(e);break;case 18:this.parseMetadata(e.body)}}},{key:"_parseVideoData",value:function(e,t,n,i,r){if(i==this._timestampBase&&0!=this._timestampBase)throw new v.default(i,this._timestampBase,"夭寿啦这个视频不是从0开始");if(n<=1)return void console.log(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");var o=new Uint8Array(e,t,n)[0],a=(240&o)>>>4,s=15&o;if(7!==s)return void(this._onError&&this._onError("Flv: Unsupported codec in video frame: "+s));this._parseAVCVideoPacket(e,t+1,n-1,i,r,a)}},{key:"_parseAVCVideoPacket",value:function(e,t,n,i,r,o){if(n<4)return void console.log(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");var a=this._littleEndian,s=new DataView(e,t,n),u=s.getUint8(0),c=16777215&s.getUint32(0,!a);if(0===u)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===u)this._parseAVCVideoData(e,t+4,n-4,i,r,o,c);else if(2!==u)return void this._onError("Flv: Invalid video packet type "+u)}},{key:"_parseAVCDecoderConfigurationRecord",value:function(e,t,n){if(n<7)return void console.log(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");var i=this._videoMetadata,r=this._videoTrack,o=this._littleEndian,a=new DataView(e,t,n);i?void 0!==i.avcc&&console.log(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(i=this._videoMetadata={},i.type="video",i.id=r.id,i.timescale=this._timescale,i.duration=this._duration);var s=a.getUint8(0),u=a.getUint8(1);a.getUint8(2),a.getUint8(3);if(1!==s||0===u)return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");if(this._naluLengthSize=1+(3&a.getUint8(4)),3!==this._naluLengthSize&&4!==this._naluLengthSize)return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));var c=31&a.getUint8(5);if(0===c||c>1)return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid H264 SPS count: "+c);for(var f=6,l=0;l<c;l++){var h=a.getUint16(f,!o);if(f+=2,0!==h){var v=new Uint8Array(e,t+f,h);f+=h;var p=d.default.parseSPS(v);i.codecWidth=p.codec_size.width,i.codecHeight=p.codec_size.height,i.presentWidth=p.present_size.width,i.presentHeight=p.present_size.height,i.config=p,i.profile=p.profile_string,i.level=p.level_string,i.bitDepth=p.bit_depth,i.chromaFormat=p.chroma_format,i.sarRatio=p.sar_ratio,i.frameRate=p.frame_rate,!1!==p.frame_rate.fixed&&0!==p.frame_rate.fps_num&&0!==p.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var m=i.frameRate.fps_den,y=i.frameRate.fps_num;i.refSampleDuration=Math.floor(i.timescale*(m/y));for(var g=v.subarray(1,4),b="avc1.",_=0;_<3;_++){var w=g[_].toString(16);w.length<2&&(w="0"+w),b+=w}i.codec=b;var k=this._mediaInfo;k.width=i.codecWidth,k.height=i.codecHeight,k.fps=i.frameRate.fps,k.profile=i.profile,k.level=i.level,k.chromaFormat=p.chroma_format_string,k.sarNum=i.sarRatio.width,k.sarDen=i.sarRatio.height,k.videoCodec=b,k.meta=i,k.hasAudio?null!=k.audioCodec&&(k.mimeType='video/x-flv; codecs="'+k.videoCodec+","+k.audioCodec+'"'):k.mimeType='video/x-flv; codecs="'+k.videoCodec+'"',k.isComplete()&&this._onMediaInfo(k)}}var S=a.getUint8(f);if(0===S||S>1)return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid H264 PPS count: "+S);f++;for(var E=0;E<S;E++){var x=a.getUint16(f,!o);f+=2,0!==x&&(f+=x)}i.avcc=new Uint8Array(n),i.avcc.set(new Uint8Array(e,t,n),0),console.log(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}},{key:"timestampBase",value:function(e){this._timestampBase=e}},{key:"_parseAVCVideoData",value:function(e,t,n,i,r,o,a){for(var s=this._littleEndian,u=new DataView(e,t,n),c=[],f=0,l=0,d=this._naluLengthSize,h=this._timestampBase+i,v=1===o,p=h,m=0;m<this._timeInfo.aacFixedRecord.length;m++)if(h>this._timeInfo.aacFixedRecord[m].ed){this._timeInfo.aacFixedRecord.splice(0,m);break}if(this._timeInfo.avcLastDts&&p-this._timeInfo.avcLastDts>this._timeInfo.avcSampleDuration){for(var y=!1,g=0;g<this._timeInfo.aacFixedRecord.length;g++)if(p>=this._timeInfo.aacFixedRecord[g].st&&p<=this._timeInfo.aacFixedRecord[g].ed){p-=this._timeInfo.aacFixedRecord[g].fix,y=!0,this._timeInfo.aacFixedRecord[g].ed==Number.POSITIVE_INFINITY&&p-this._timeInfo.avcLastDts>this._timeInfo.avcSampleDuration&&(y=!1);break}y||(p=this._timeInfo.avcLastDts+this._timeInfo.avcSampleDuration),p<=this._timeInfo.avcLastDts&&(p=this._timeInfo.avcLastDts+1)}for(var b=p+a;l<n;){if(l+4>=n){console.log(this.TAG,"Malformed Nalu near timestamp "+h+", offset = "+l+", dataSize = "+n);break}var _=u.getUint32(l,!s);if(3===d&&(_>>>=8),_>n-d)return void console.log(this.TAG,"Malformed Nalus near timestamp "+h+", NaluSize > DataSize!");var w=31&u.getUint8(l+d);5===w&&(v=!0);var k=new Uint8Array(e,t+l,d+_),S={type:w,data:k};c.push(S),f+=k.byteLength,l+=d+_}if(c.length){var E=this._videoTrack,x={units:c,length:f,isKeyframe:v,dts:p,cts:a,pts:b};v&&(x.fileposition=r),E.samples.push(x),E.length+=f}this._timeInfo.avcLastDts=p}},{key:"_parseAudioData",value:function(e,t,n,i){if(i==this._timestampBase&&0!=this._timestampBase&&console.log(i,this._timestampBase,"夭寿啦这个视频不是从0开始"),n<=1)return void console.log(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");var r=this._audioMetadata,o=this._audioTrack;if(!r||!r.codec){r=this._audioMetadata={},r.type="audio",r.id=o.id,r.timescale=this._timescale,r.duration=this._duration;var a=(this._littleEndian,new DataView(e,t,n)),s=a.getUint8(0),u=s>>>4;if(10!==u)return void this._onError(DemuxErrors.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+u);var c=0,f=(12&s)>>>2,l=[5500,11025,22050,44100,48e3];if(!(f<l.length))return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+f);c=l[f];var d=1&s;r.audioSampleRate=c,r.channelCount=0===d?1:2,r.refSampleDuration=Math.floor(1024/r.audioSampleRate*r.timescale),r.codec="mp4a.40.5"}var h=this._parseAACAudioData(e,t+1,n-1);if(void 0!=h){if(0===h.packetType){r.config&&console.log(this.TAG,"Found another AudioSpecificConfig!");var v=h.data;r.audioSampleRate=v.samplingRate,r.channelCount=v.channelCount,r.codec=v.codec,r.config=v.config,r.refSampleDuration=Math.floor(1024/r.audioSampleRate*r.timescale),console.log(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1;var p=this._mediaInfo;return p.audioCodec="mp4a.40."+v.originalAudioObjectType,p.audioSampleRate=r.audioSampleRate,p.audioChannelCount=r.channelCount,p.hasVideo?null!=p.videoCodec&&(p.mimeType='video/x-flv; codecs="'+p.videoCodec+","+p.audioCodec+'"'):p.mimeType='video/x-flv; codecs="'+p.audioCodec+'"',this._onTrackMetadata("audio",r),void(p.isComplete()&&this._onMediaInfo(p))}if(1===h.packetType){var m=this._timestampBase+i;this._timeInfo.aacFirstDts||(this._timeInfo.aacFirstDts=m);var y=m-Math.floor(this._timeInfo.aacFirstDts+this._timeInfo.aacCurrentDtsOffset)-this._timeInfo.aacCurrentFixedLen;y>1&&(this._timeInfo.aacCurrentFixedLen+=y,this._timeInfo.aacFixedRecord.length&&(this._timeInfo.aacFixedRecord[this._timeInfo.aacFixedRecord.length-1].ed=m),this._timeInfo.aacFixedRecord.push({st:m,fix:this._timeInfo.aacCurrentFixedLen,ed:Number.POSITIVE_INFINITY}),this._onCdnDropFrame&&this._onCdnDropFrame(y));var g=1024e3/r.audioSampleRate,b=Math.floor(this._timeInfo.aacFirstDts+this._timeInfo.aacCurrentDtsOffset),_={unit:h.data,dts:b,pts:b,length:g};this._timeInfo.aacCurrentDtsOffset+=g,o.samples.push(_),o.length+=h.data.length}else console.log(this.TAG,"Flv: Unsupported AAC data type "+h.packetType)}}},{key:"_parseAACAudioData",value:function(e,t,n){if(n<=1)return void console.log(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");var i={},r=new Uint8Array(e,t,n);return i.packetType=r[0],0===r[0]?i.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):i.data=r.subarray(1),i}},{key:"_parseAACAudioSpecificConfig",value:function(e,t,n){var i=new Uint8Array(e,t,n),r=null,o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=0,s=0,u=0,c=null;if(a=s=i[0]>>>3,(u=(7&i[0])<<1|i[1]>>>7)<0||u>=o.length)return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");var f=o[u],l=(120&i[1])>>>3;if(l<0||l>=8)return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: AAC invalid channel configuration");5===a&&(c=(7&i[1])<<1|i[2]>>>7,i[2]);var d=self.navigator.userAgent.toLowerCase();return-1!==d.indexOf("firefox")?u>=6?(a=5,r=new Array(4),c=u-3):(a=2,r=new Array(2),c=u):-1!==d.indexOf("android")?(a=2,r=new Array(2),c=u):(a=5,c=u,r=new Array(4),u>=6?c=u-3:1===l&&(a=2,r=new Array(2),c=u)),r[0]=a<<3,r[0]|=(15&u)>>>1,r[1]=(15&u)<<7,r[1]|=(15&l)<<3,5===a&&(r[1]|=(15&c)>>>1,r[2]=(1&c)<<7,r[2]|=8,r[3]=0),{config:r,samplingRate:f,channelCount:l,codec:"mp4a.40."+a,originalAudioObjectType:s}}},{key:"_isInitialMetadataDispatched",value:function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:void 0}},{key:"hasAudio",set:function(e){this._mediaInfo.hasAudio=this._hasAudio=e}},{key:"hasVideo",set:function(e){this._mediaInfo.hasVideo=this._hasVideo=e}},{key:"onCdnDropFrame",set:function(e){this._onCdnDropFrame=e}}]),e}();t.default=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(133),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){i(this,e)}return r(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,o=0;o<n;o++)o>=2&&3===t[o]&&0===t[o-1]&&0===t[o-2]||(i[r]=t[o],r++);return new Uint8Array(i.buffer,0,r)}},{key:"parseSPS",value:function(t){var n=e._ebsp2rbsp(t),i=new a.default(n);i.readByte();var r=i.readByte();i.readByte();var o=i.readByte();i.readUEG();var s=e.getProfileString(r),u=e.getLevelString(o),c=1,f=420,l=[0,420,422,444],d=8;if((100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r||138===r||144===r)&&(c=i.readUEG(),3===c&&i.readBits(1),c<=3&&(f=l[c]),d=i.readUEG()+8,i.readUEG(),i.readBits(1),i.readBool()))for(var h=3!==c?8:12,v=0;v<h;v++)i.readBool()&&(v<6?e._skipScalingList(i,16):e._skipScalingList(i,64));i.readUEG();var p=i.readUEG();if(0===p)i.readUEG();else if(1===p){i.readBits(1),i.readSEG(),i.readSEG();for(var m=i.readUEG(),y=0;y<m;y++)i.readSEG()}i.readUEG(),i.readBits(1);var g=i.readUEG(),b=i.readUEG(),_=i.readBits(1);0===_&&i.readBits(1),i.readBits(1);var w=0,k=0,S=0,E=0;i.readBool()&&(w=i.readUEG(),k=i.readUEG(),S=i.readUEG(),E=i.readUEG());var x=1,T=1,O=0,A=!0,R=0,M=0;if(i.readBool()){if(i.readBool()){var D=i.readByte(),B=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],C=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];D>0&&D<16?(x=B[D-1],T=C[D-1]):255===D&&(x=i.readByte()<<8|i.readByte(),T=i.readByte()<<8|i.readByte())}if(i.readBool()&&i.readBool(),i.readBool()&&(i.readBits(4),i.readBool()&&i.readBits(24)),i.readBool()&&(i.readUEG(),i.readUEG()),i.readBool()){var L=i.readBits(32),I=i.readBits(32);A=i.readBool(),R=I,M=2*L,O=R/M}}var P=1;1===x&&1===T||(P=x/T);var j=0,N=0;if(0===c)j=1,N=2-_;else{var U=3===c?1:2,F=1===c?2:1;j=U,N=F*(2-_)}var V=16*(g+1),z=16*(b+1)*(2-_);V-=(w+k)*j,z-=(S+E)*N;var G=Math.ceil(V*P);return i.destroy(),i=null,{profile_string:s,level_string:u,bit_depth:d,chroma_format:f,chroma_format_string:e.getChromaFormatString(f),frame_rate:{fixed:A,fps:O,fps_den:M,fps_num:R},sar_ratio:{width:x,height:T},codec_size:{width:V,height:z},present_size:{width:G,height:z}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,i=8,r=0,o=0;o<t;o++)0!==i&&(r=e.readSEG(),i=(n+r+256)%256),n=0===i?n:i}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};for(var t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=e.constants={};n.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),n.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),n.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),n.STSC=n.STCO=n.STTS,n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),n.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}},{key:"box",value:function(e){for(var t=8,n=null,i=Array.prototype.slice.call(arguments,1),r=i.length,o=0;o<r;o++)t+=i[o].byteLength;n=new Uint8Array(t),n[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);for(var a=8,s=0;s<r;s++)n.set(i[s],a),a+=i[s].byteLength;return n}},{key:"generateInitSegment",value:function(t){t.constructor!=Array&&(t=[t]);var n=e.box(e.types.ftyp,e.constants.FTYP),i=e.moov(t),r=new Uint8Array(n.byteLength+i.byteLength);return r.set(n,0),r.set(i,n.byteLength),r}},{key:"moov",value:function(t){var n=e.mvhd(t[0].timescale,t[0].duration),i=e.trak(t[0]),r=void 0;t.length>1&&(r=e.trak(t[1]));var o=e.mvex(t);return t.length>1?e.box(e.types.moov,n,i,r,o):e.box(e.types.moov,n,i,o)}},{key:"mvhd",value:function(t,n){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"tkhd",value:function(t){var n=t.id,i=t.duration,r=t.presentWidth,o=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>>8&255,255&r,0,0,o>>>8&255,255&o,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))}},{key:"mdhd",value:function(t){var n=t.timescale,i=t.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i,85,196,0,0]))}},{key:"hdlr",value:function(t){var n=null;return n="audio"===t.type?e.constants.HDLR_AUDIO:e.constants.HDLR_VIDEO,e.box(e.types.hdlr,n)}},{key:"minf",value:function(t){var n=null;return n="audio"===t.type?e.box(e.types.smhd,e.constants.SMHD):e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,n,e.dinf(),e.stbl(t))}},{key:"dinf",value:function(){return e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF))}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO))}},{key:"stsd",value:function(t){return"audio"===t.type?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(t))}},{key:"mp4a",value:function(t){var n=t.channelCount,i=t.audioSampleRate,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types.mp4a,r,e.esds(t))}},{key:"esds",value:function(t){var n=t.config,i=n.length,r=new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(n).concat([6,1,2]));return e.box(e.types.esds,r)}},{key:"avc1",value:function(t){var n=t.avcc,i=t.codecWidth,r=t.codecHeight,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,r>>>8&255,255&r,0,72,0,0,0,72,0,0,0,0,0,0,0,1,4,103,49,49,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,o,e.box(e.types.avcC,n))}},{key:"mvex",value:function(t){return t.length>1?e.box(e.types.mvex,e.trex(t[0]),e.trex(t[1])):e.box(e.types.mvex,e.trex(t[0]))}},{key:"trex",value:function(t){var n=t.id,i=new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,i)}},{key:"moof",value:function(t,n){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,n))}},{key:"mfhd",value:function(t){var n=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,n)}},{key:"traf",value:function(t,n){var i=t.id,r=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),o=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),a=e.sdtp(t),s=e.trun(t,a.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,r,o,s,a)}},{key:"sdtp",value:function(t){for(var n=t.samples||[],i=n.length,r=new Uint8Array(4+i),o=0;o<i;o++){var a=n[o].flags;r[o+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return e.box(e.types.sdtp,r)}},{key:"trun",value:function(t,n){var i=t.samples||[],r=i.length,o=12+16*r,a=new Uint8Array(o);n+=8+o,a.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var s=0;s<r;s++){var u=i[s].duration,c=i[s].size,f=i[s].flags,l=i[s].cts;a.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,c>>>24&255,c>>>16&255,c>>>8&255,255&c,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.isNonSync,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*s)}return e.box(e.types.trun,a)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(43),r=n(141),o=n.n(r);n.d(t,"Log",function(){return i.default}),n.d(t,"UAParser",function(){return o.a});var a=n(142);n.d(t,"genTraversalHandler",function(){return a.f}),n.d(t,"deepClone",function(){return a.e}),n.d(t,"deepAssign",function(){return a.d}),n.d(t,"camelize",function(){return a.c}),n.d(t,"hypenate",function(){return a.h}),n.d(t,"bind",function(){return a.b}),n.d(t,"uuid",function(){return a.j}),n.d(t,"S4",function(){return a.a}),n.d(t,"rand",function(){return a.i}),n.d(t,"getDeepProperty",function(){return a.g});var s=n(13);n.d(t,"defined",function(){return s.a}),n.d(t,"isVoid",function(){return s.y}),n.d(t,"isArray",function(){return s.b}),n.d(t,"isFunction",function(){return s.l}),n.d(t,"isObject",function(){return s.r}),n.d(t,"isNumber",function(){return s.p}),n.d(t,"isNumeric",function(){return s.q}),n.d(t,"isInteger",function(){return s.n}),n.d(t,"isEmpty",function(){return s.h}),n.d(t,"isEvent",function(){return s.j}),n.d(t,"isBlob",function(){return s.c}),n.d(t,"isFile",function(){return s.k}),n.d(t,"isDate",function(){return s.f}),n.d(t,"isString",function(){return s.w}),n.d(t,"isBoolean",function(){return s.d}),n.d(t,"isPromise",function(){return s.u}),n.d(t,"isPrimitive",function(){return s.t}),n.d(t,"isUrl",function(){return s.x}),n.d(t,"isNode",function(){return s.o}),n.d(t,"isElement",function(){return s.g}),n.d(t,"isChildNode",function(){return s.e}),n.d(t,"isPosterityNode",function(){return s.s}),n.d(t,"isHTMLString",function(){return s.m}),n.d(t,"isError",function(){return s.i}),n.d(t,"isRegExp",function(){return s.v});var u=n(72);n.d(t,"inBrowser",function(){return u.h}),n.d(t,"makeArray",function(){return u.i}),n.d(t,"transObjectAttrIntoArray",function(){return u.p}),n.d(t,"runRejectableQueue",function(){return u.k}),n.d(t,"runStoppableQueue",function(){return u.l}),n.d(t,"decodeUTF8",function(){return u.d}),n.d(t,"debounce",function(){return u.c}),n.d(t,"throttle",function(){return u.o}),n.d(t,"raf",function(){return u.j}),n.d(t,"caf",function(){return u.b}),n.d(t,"strRepeat",function(){return u.n}),n.d(t,"formatTime",function(){return u.f}),n.d(t,"appendCSS",function(){return u.a}),n.d(t,"formatDate",function(){return u.e}),n.d(t,"getLocalStorage",function(){return u.g}),n.d(t,"setLocalStorage",function(){return u.m});var c=n(4);n.d(t,"emitEventCache",function(){return c.emitEventCache}),n.d(t,"addEventCache",function(){return c.addEventCache}),n.d(t,"removeEventCache",function(){return c.removeEventCache}),n.d(t,"CustEvent",function(){return c.CustEvent});var f=n(158);n.d(t,"getAttr",function(){return f.g}),n.d(t,"setAttr",function(){return f.o}),n.d(t,"addClassName",function(){return f.c}),n.d(t,"removeClassName",function(){return f.k}),n.d(t,"hasClassName",function(){return f.i}),n.d(t,"supportsPassive",function(){return f.q}),n.d(t,"removeEvent",function(){return f.n}),n.d(t,"addEvent",function(){return f.e}),n.d(t,"addDelegate",function(){return f.d}),n.d(t,"removeDelegate",function(){return f.l}),n.d(t,"getStyle",function(){return f.h}),n.d(t,"setStyle",function(){return f.p}),n.d(t,"query",function(){return f.j}),n.d(t,"removeEl",function(){return f.m}),n.d(t,"findParents",function(){return f.f}),n.d(t,"NodeWrap",function(){return f.b}),n.d(t,"$",function(){return f.a})},function(e,t,n){"use strict";t.__esModule=!0;var i=n(45),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}},function(e,t,n){var i=n(7);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){var i=n(19),r=n(3)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(70),r=n(3)("iterator"),o=n(19);e.exports=n(0).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){var i=n(21),r=n(3)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),r))?n:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var i=n(3)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";function i(e){return E()(e)}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return+e-+t};return k()(e).sort(t).reduce(function(t,n){return t.concat(e[n])},[])}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new _.a(function(t,i){!function r(o){if(o>=e.length)return void t();var a=Object(x.l)(e[o])?e[o].apply(e,g()(n)):e[o];return!1===a?i("stop"):_.a.resolve(a).then(function(){return r(o+1)}).catch(function(e){return i(e||"stop")})}(0)})}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function t(i){return i>=e.length||!1!==(Object(x.l)(e[i])?e[i].apply(e,g()(n)):e[i])&&t(++i)}(0)}function s(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!=(192&i[++t]))return!1;return!0}return!1}function u(e){for(var t=[],n=e,i=0,r=e.length;i<r;)if(n[i]<128)t.push(String.fromCharCode(n[i])),++i;else{if(n[i]<192);else if(n[i]<224){if(s(n,i,1)){var o=(31&n[i])<<6|63&n[i+1];if(o>=128){t.push(String.fromCharCode(65535&o)),i+=2;continue}}}else if(n[i]<240){if(s(n,i,2)){var a=(15&n[i])<<12|(63&n[i+1])<<6|63&n[i+2];if(a>=2048&&55296!=(63488&a)){t.push(String.fromCharCode(65535&a)),i+=3;continue}}}else if(n[i]<248&&s(n,i,3)){var u=(7&n[i])<<18|(63&n[i+1])<<12|(63&n[i+2])<<6|63&n[i+3];if(u>65536&&u<1114112){u-=65536,t.push(String.fromCharCode(u>>>10|55296)),t.push(String.fromCharCode(1023&u|56320)),i+=4;continue}}t.push(String.fromCharCode(65533)),++i}return t.join("")}function c(e,t,n){var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=function u(){var c=new Date-a;c<t&&c>=0?i=setTimeout(u,t-c):(i=null,n||(s=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=new Date;var c=n&&!i;return i||(i=setTimeout(u,t)),c&&(s=e.apply(o,r),o=r=null),s}}function f(e,t,n,i){var r=void 0,o=void 0,a=void 0,s=null,u=0;n||(n={});var c=function(){u=!1===n.leading?0:new Date-0,s=null,a=e.apply(r,o),s||(r=o=null)};return t=t||0,function(){var f=new Date;u||!1!==n.leading||(u=f);var l=t-(f-u);return r=i||this,o=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),u=f,a=e.apply(r,o),s||(r=o=null)):s||!1===n.trailing||(s=setTimeout(c,l)),a}}function l(e,t){var n=t;e=""+(e||"");var i=e.length;return t=(t||i)-i,((t>0?e.repeat?"0".repeat(t):new Array(t+1).join("0"):"")+e).slice(0,n)}function d(e){var t=Math.floor(e/3600);e=Math.floor(e%3600);var n=l(Math.floor(e/60),2);e=Math.floor(e%60);var i=l(e,2);return t>=1?t+":"+n+":"+i:n+":"+i}function h(e){var t=document,n=t.querySelector("style");if(!n){n=t.createElement("style");var i=t.querySelector("head");i&&i.appendChild(n)}return n.appendChild(t.createTextNode(e)),n}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss.i",n=e.getFullYear().toString(),i={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),i:e.getMilliseconds()};t=t.replace(/(y+)/gi,function(e,t){return n.substr(4-Math.min(4,t.length))});for(var r in i)!function(e){t=t.replace(new RegExp("("+e+"+)","g"),function(t,n){return(i[e]<10&&n.length>1?"0":"")+i[e]})}(r);return t}function p(e){try{return window.localStorage.getItem(e)}catch(n){try{var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return Object(x.b)(t)?unescape(t[2]):""}catch(e){return""}}}function m(e,t){try{window.localStorage.setItem(e,t)}catch(i){var n=new Date;n.setTime(n.getTime()+2592e7);try{document.cookie=e+"="+escape(t)+";expires="+n.toUTCString()+";path=/;"}catch(e){console.error(e)}}}n.d(t,"h",function(){return T}),n.d(t,"i",function(){return i}),n.d(t,"p",function(){return r}),n.d(t,"k",function(){return o}),n.d(t,"l",function(){return a}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"o",function(){return f}),n.d(t,"j",function(){return O}),n.d(t,"b",function(){return A}),n.d(t,"n",function(){return l}),n.d(t,"f",function(){return d}),n.d(t,"a",function(){return h}),n.d(t,"e",function(){return v}),n.d(t,"g",function(){return p}),n.d(t,"m",function(){return m});var y=n(66),g=n.n(y),b=n(146),_=n.n(b),w=n(57),k=n.n(w),S=n(45),E=n.n(S),x=n(13),T="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),O=T&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame)||function(e){return setTimeout(e,17)},A=T&&(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame)||function(e){clearTimeout(e)}},function(e,t,n){var i=n(7),r=n(24),o=n(3)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||void 0==(n=i(a)[o])?t:r(n)}},function(e,t,n){var i,r,o,a=n(17),s=n(151),u=n(52),c=n(31),f=n(1),l=f.process,d=f.setImmediate,h=f.clearImmediate,v=f.MessageChannel,p=f.Dispatch,m=0,y={},g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){g.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},i(m),m},h=function(e){delete y[e]},"process"==n(21)(l)?i=function(e){l.nextTick(a(g,e,1))}:p&&p.now?i=function(e){p.now(a(g,e,1))}:v?(r=new v,o=r.port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(i=function(e){f.postMessage(e+"","*")},f.addEventListener("message",b,!1)):i="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(7),r=n(8),o=n(46);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){e.exports=n(78)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(79),c=i(u),f=n(122),l=i(f),d=n(140),h=i(d),v=n(65),p=n(159),m=i(p),y=n(15),g=function(){function e(t){a(this,e),this._resetForNewSession(t),this._resetForNewInterval()}return s(e,[{key:"_resetForNewSession",value:function(e){this.currentPlaybackSpeed=1,this.lastDownloadedBytes=0,this.playUrl=e,this.domain=new URL(e).hostname,this.playStartTimestampMillis=(new Date).getTime(),this.lastVideoBuffered={start:-1e9,end:-1e9}}},{key:"_resetForNewInterval",value:function(){this.currentPlaybackSpeedTimestamp=(new Date).getTime(),this.playbackSpeedStat={"0.75x":0,"1.25x":0,"1.5x":0},this.statTimestampMillis=(new Date).getTime(),this.bufferingCount=0,this.bufferingDurationMillis=0,this.bufferingStartTimestampMillis=this.bufferingStartTimestampMillis?(new Date).getTime():null,this.downloadedBytes=0,this.audioBufferedMillis=0,this.videoBufferedMillis=0,this.demuxedDurationSec=0,this.excessiveDataDroppedSec=0,this.blockCountWithBuffer=0,this.bufferDuringBlockSum=0}},{key:"videoBufferedUpdated",value:function(e){if(0!==e.length){var t=e.start(e.length-1),n=e.end(e.length-1);t>this.lastVideoBuffered.end+.001?(this.demuxedDurationSec+=n-t,this.lastVideoBuffered={start:t,end:n}):(this.demuxedDurationSec+=Math.max(0,n-this.lastVideoBuffered.end),this.lastVideoBuffered.end=n)}}},{key:"playbackSpeedChanged",value:function(e){var t=(new Date).getTime(),n=t-this.currentPlaybackSpeedTimestamp,i=Math.abs(e-.75)<.001?"0.75x":Math.abs(e-1.25)<.001?"1.25x":Math.abs(e-1.5)<.001?"1.5x":null;i&&(this.playbackSpeedStat[i]+=n,this.currentPlaybackSpeedTimestamp=(new Date).getTime())}},{key:"bufferingStarted",value:function(e){++this.bufferingCount,this.bufferingStartTimestampMillis=(new Date).getTime(),e>.3&&(this.bufferDuringBlockSum+=e,this.blockCountWithBuffer++)}},{key:"bufferingEnded",value:function(){var e=(new Date).getTime();null!=this.bufferingStartTimestampMillis&&(this.bufferingDurationMillis+=e-this.bufferingStartTimestampMillis),this.bufferingStartTimestampMillis=null}},{key:"updateDownloadedBytes",value:function(e){var t=e-this.lastDownloadedBytes;this.downloadedBytes+=t,this.lastDownloadedBytes=e}},{key:"setAudioBufferedSec",value:function(e){this.audioBufferedMillis=Math.round(1e3*e)}},{key:"setVideoBufferedSec",value:function(e){this.videoBufferedMillis=Math.round(1e3*e)}},{key:"excessiveDataDropped",value:function(e){this.excessiveDataDroppedSec+=e}},{key:"buildAndStartNewInterval",value:function(){var e=(new Date).getTime(),t=null==this.bufferingStartTimestampMillis?0:e-this.bufferingStartTimestampMillis,n=(this.bufferingStartTimestampMillis,{play_url:this.playUrl,domain:this.domain,play_start_time:this.playStartTimestampMillis,tick_start:this.statTimestampMillis,tick_duration:e-this.statTimestampMillis,block_count:this.bufferingCount,buffer_time:this.bufferingDurationMillis+t,kbytes_received:this.downloadedBytes>>10,played_video_duration:e-this.statTimestampMillis-(this.bufferingDurationMillis+t),demuxed_video_duration:Math.round(1e3*this.demuxedDurationSec),dropped_packet_duration:Math.round(1e3*this.excessiveDataDroppedSec),a_buf_len:this.audioBufferedMillis,v_buf_len:this.videoBufferedMillis,speed_chg_metric:this.playbackSpeedStat,block_count_with_buffer:this.blockCountWithBuffer,buffer_during_block:this.blockCountWithBuffer>0?Math.round(this.bufferDuringBlockSum/this.blockCountWithBuffer*1e3):0});return this._resetForNewInterval(),n}}]),e}(),b=function(e){function t(e,n){a(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.tag="flv-player",i.video=e,i.box="flv",i.timer=null,i.seekTimer=null,i.checkBufferTimer=null,i.realtimeBeaconTimer=null,i.config=(0,v.deepAssign)({},h.default,n),i.requestSetTime=!1,i.throttle=null,i.bindEvents(),i.attachMedia(),i.initLogger(),console.log("kernel",t.version),i}return o(t,e),s(t,null,[{key:"isSupport",value:function(){var e=new v.UAParser,t=e.getBrowser();return!("Safari"===t.name&&parseInt(t.major)<10)&&!(!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.640020,mp4a.40.2"'))}},{key:"version",get:function(){return"1.4.11"}}]),s(t,[{key:"initLogger",value:function(){var e=this;this.logger=new m.default,this.logger.on("performance",function(t){e.emit("performance",t.data)})}},{key:"internalPropertyHandle",value:function(){if(Object.getOwnPropertyDescriptor){var e=this,t=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");Object.defineProperty(this.video,"currentTime",{get:function(){return t.get.call(e.video)},set:function(n){if(e.currentTimeLock)return t.set.call(e.video,n);throw new Error("can not set currentTime by youself")}})}}},{key:"bindEvents",value:function(){this.video&&(this._onVideoCanplay=this._onVideoCanplay.bind(this),this._onVideoWaiting=this._onVideoWaiting.bind(this),this._onVideoPlaying=this._onVideoPlaying.bind(this),this._onVideoTimeupdate=this._onVideoTimeupdate.bind(this),this.video.addEventListener("canplay",this._onVideoCanplay),this.video.addEventListener("waiting",this._onVideoWaiting),this.video.addEventListener("playing",this._onVideoPlaying),this.video.addEventListener("timeupdate",this._onVideoTimeupdate),this._lastBufferd=null,this.checkBufferTimer=setInterval(this._checkBuffer.bind(this),200))}},{key:"unbindMediaSourceEvent",value:function(e){e.off("error"),e.off("bufferFull"),e.off("updateend"),e.off("player-event")}},{key:"attachMedia",value:function(){var e=this;this.mediaSource=new c.default(this.video,this.config),this.mediaSource.on("error",function(t){e.emit("error",t.data),e.transmuxer&&e.transmuxer.pause()}),this.mediaSource.on("bufferFull",function(){e.pauseTransmuxer()}),this.mediaSource.on("updateend",function(){e.onmseUpdateEnd()}),this.mediaSource.on("player-event",function(t){e.logger.record(t.data)})}},{key:"load",value:function(e){e&&(this.config.src=e),this.realtimeBeaconBuilder=new g(this.config.src),this.realtimeBeaconTimer=setInterval(this._sendRealtimeBeacon.bind(this),1e4),this.transmuxer=new l.default(this.mediaSource,this.config,this.globalEvent),this.transmuxerEvent(this.transmuxer),this.transmuxer.loadSource()}},{key:"unbindTransmuxerEvent",value:function(e){e.off("mediaSegment"),e.off("mediaSegmentInit"),e.off("error"),e.off("end"),e.off("heartbeat"),e.off("performance"),e.off("mediaInfo"),e.off("player-event")}},{key:"transmuxerEvent",value:function(e){var t=this,n=this.mediaSource;e.on("mediaSegment",function(e){n.emit("mediaSegment",e.data)}),e.on("mediaSegmentInit",function(e){n.emit("mediaSegmentInit",e.data)}),e.on("error",function(i){t.emit("error",i.data),e.pause(),n.pause()}),e.on("end",function(e){n.endOfStream()}),e.on("heartbeat",function(e){t.emit("heartbeat",e.data),t.realtimeBeaconBuilder.updateDownloadedBytes(e.data.totalReceive)}),e.on("performance",function(e){var n=e.data,i=n.type,r=n.value;return"first-flv-to-mp4"===i?(t.firstFlvToMp4=t.firstFlvToMp4||0,void(t.firstFlvToMp4+=r)):"receive-first-package-duration"===i?(t.receiveFirstPAckageDuration=t.receiveFirstPAckageDuration||0,void(t.receiveFirstPAckageDuration+=r)):void("first-flv-package-duration"===i&&(t.firstFlvPackageDuration=t.firstFlvPackageDuration||0,t.firstFlvPackageDuration+=r))}),e.on("mediaInfo",function(e){t.mediaInfo?t.emit("mediaInfo",e.data):(t.mediaInfo=e,t.emit("mediaInfo",e.data),n.init(e.data),t.video.src=URL.createObjectURL(n.mediaSource),t.video.addEventListener("seeking",t._throttle.call(t)))}),e.on("player-event",function(e){t.logger.record(e.data)})}},{key:"_throttle",value:function(){return this.throttle=(0,v.throttle)(this._seek.bind(this),200,{leading:!1}),this.throttle}},{key:"isTimeinBuffered",value:function(e){for(var t=this.video.buffered,n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(e>=i&&e<r)return!0}return!1}},{key:"_getBufferEnd",value:function(e,t){for(var n=0;n<e.length;n++){var i=e.start(n),r=e.end(n);if(i<=t&&t<r)return r}}},{key:"getCurrentBufferEnd",value:function(){return this._getBufferEnd(this.video.buffered,this.video.currentTime)}},{key:"_seek",value:function(e){var t=this;if(this.transmuxer){this.currentTimeLock=!0;var n=(0,v.isNumber)(e)&&!isNaN(e)?e:this.video.currentTime;if(this.requestSetTime)return this.requestSetTime=!1,void(this.currentTimeLock=!1);if(this.isTimeinBuffered(n)){if(this.config.alwaysSeekKeyframe){var i=this.transmuxer.getNearestKeyframe(Math.floor(1e3*n));i&&(this.requestSetTime=!0,this.video.currentTime=i.keyframetime/1e3)}}else{v.Log.verbose(this.tag,"do seek"),this.transmuxer.pause();var r=this.transmuxer.getNearestKeyframe(Math.floor(1e3*n));n=r.keyframetime/1e3,this.seekTimer=setTimeout(function(){t.mediaSource.seek(n),t.transmuxer.seek(r)},100),this.requestSetTime=!0,this.video.currentTime=n,window.clearInterval(this.timer),this.timer=null}return this.currentTimeLock=!1,n}}},{key:"onmseUpdateEnd",value:function(){if(this.mediaSource.sourceBuffer.video&&this.realtimeBeaconBuilder.videoBufferedUpdated(this.mediaSource.sourceBuffer.video.buffered),!this.config.isLive){this.getCurrentBufferEnd()>=this.video.currentTime+this.config.lazyLoadMaxDuration&&null===this.timer&&(v.Log.verbose(this.tag,"Maximum buffering duration exceeded, suspend transmuxing task"),this.pauseTransmuxer())}}},{key:"heartbeat",value:function(){for(var e=this.video.currentTime,t=this.video.buffered,n=!1,i=0;i<t.length;i++){var r=t.start(i),o=t.end(i);if(e>=r&&e<o){e>=o-this.config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this.timer),this.timer=null,v.Log.verbose(this.tag,"Continue loading from paused position"),this.transmuxer.resume(),this.mediaSource.resume())}},{key:"_checkBuffer",value:function(){var e=this;if(this.config.isLive){var t=this.getCurrentBufferEnd();if(void 0===t){var n=this.video.buffered,i=n.length;if(!(i>0&&n.start(i-1)>this.video.currentTime+.001))return;v.Log.verbose("currentTime being in no-data GaP detected. Jumping to "+n.start(i-1)),this.video.currentTime=n.start(i-1),t=n.end(i-1)}var r=t-this.video.currentTime;if(null!=this._lastBufferd){var o=function(t){v.Log.verbose("Change playback rate from "+e.video.playbackRate+" to "+t+", buffered:"+r),e.video.playbackRate=t,e.realtimeBeaconBuilder.playbackSpeedChanged(t)};this.video.playbackRate<.999?r>4.999&&o(1):this.video.playbackRate>1.001&&r<5.001&&o(1)}this._lastBufferd=r}}},{key:"_sendRealtimeBeacon",value:function(){if(this.mediaSource.sourceBuffer.audio){var e=this._getBufferEnd(this.mediaSource.sourceBuffer.audio.buffered,this.video.currentTime);this.realtimeBeaconBuilder.setAudioBufferedSec(e-this.video.currentTime)}if(this.mediaSource.sourceBuffer.video){var t=this._getBufferEnd(this.mediaSource.sourceBuffer.video.buffered,this.video.currentTime);this.realtimeBeaconBuilder.setVideoBufferedSec(t-this.video.currentTime)}var n=this.realtimeBeaconBuilder.buildAndStartNewInterval();this.emit("realtimeBeacon",n)}},{key:"_onVideoCanplay",value:function(){this.logger.record({type:y.PLAYER_EVENTS.CANPLAY,ts:Date.now()}),this.config.isLive&&this.video.play(),this.config.lockInternalProperty&&this.internalPropertyHandle()}},{key:"_onVideoWaiting",value:function(){if(this.video&&!this.video.seeking){var e=0,t=this.video.buffered;t.length>0&&(e=this.video.buffered.end(t.length-1)-this.video.currentTime),this.realtimeBeaconBuilder.bufferingStarted(e)}}},{key:"_onVideoPlaying",value:function(){for(var e=0,t=this.video.buffered,n=0;n<t.length;n++)if(t.start(n)-.1<=this.video.currentTime&&t.end(n)>=this.video.currentTime){e=t.end(n)-this.video.currentTime;break}this.logger.record({type:y.PLAYER_EVENTS.PLAYING,buffered:e,ts:Date.now()}),this.realtimeBeaconBuilder.bufferingEnded()}},{key:"_onVideoTimeupdate",value:function(){console.log("time update"),this.video.removeEventListener("timeupdate",this._onVideoTimeupdate),this.logger.record({type:y.PLAYER_EVENTS.TIMEUPDATE,ts:Date.now()})}},{key:"pauseTransmuxer",value:function(){this.transmuxer.pause(),this.mediaSource.pause(),this.timer||(this.timer=setInterval(this.heartbeat.bind(this),1e3))}},{key:"resume",value:function(){this._seek(0)}},{key:"destroy",value:function(){window.clearInterval(this.timer),window.clearInterval(this.seekTimer),window.clearInterval(this.checkBufferTimer),this.realtimeBeaconTimer&&(window.clearInterval(this.realtimeBeaconTimer),this._sendRealtimeBeacon(),this.realtimeBeaconTimer=null),this.video.removeEventListener("canplay",this._onVideoCanplay),this.video.removeEventListener("seeking",this.throttle),this.video.removeEventListener("waiting",this._onVideoWaiting),this.video.removeEventListener("playing",this._onVideoPlaying),this.video.removeEventListener("timeupdate",this._onVideoTimeupdate),this.video&&(URL.revokeObjectURL(this.video.src),this.video.src="",this.video.removeAttribute("src"),this.transmuxer&&(this.unbindTransmuxerEvent(this.transmuxer),this.transmuxer.pause(),this.transmuxer.destroy(),this.transmuxer=null),this.mediaSource&&(this.unbindMediaSourceEvent(this.mediaSource),this.mediaSource.destroy(),this.mediaSource=null)),this.logger.off("performance"),this.logger=null}},{key:"seek",value:function(e){return this._seek(e)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){return this.video.pause()}},{key:"refresh",value:function(){this.transmuxer&&this.mediaSource?this._seek(0):v.Log.verbose(this.tag,"transmuxer & mediaSource not ready")}},{key:"stopLoad",value:function(){this.transmuxer&&this.transmuxer.pause(),this.mediaSource&&this.mediaSource.pause(),this.realtimeBeaconTimer&&(window.clearInterval(this.realtimeBeaconTimer),this._sendRealtimeBeacon(),this.realtimeBeaconTimer=null)}}]),t}(v.CustEvent);t.default=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(4),u=n(43),c=function(e){return e&&e.__esModule?e:{default:e}}(u),f=n(14),l=n(15),d=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.video=e,o.config=n,o.tag="mse-controller",o.e={onSourceOpen:o.onSourceOpen.bind(o),onSourceEnded:o.onSourceEnded.bind(o),onSourceClose:o.onSourceClose.bind(o),onSourceBufferError:o.onSourceBufferError.bind(o)},o.hasVideo=!0,o.hasAudio=!0,o.removeRangesList={video:[],audio:[]},o.removeBucketing=!1,o.timer={video:null,audio:null},o.queue={video:[],audio:[]},o.sourceBuffer={video:null,audio:null},o.mimeCodec={video:null,audio:null},o.sourceBufferEvent(),o.complete=!1,o}return o(t,e),a(t,[{key:"init",value:function(e){if(this.emit("player-event",{type:l.PLAYER_EVENTS.MEDIA_INFO,ts:Date.now()}),this.mediaSource)return c.default.Error(this.tag,"MediaSource has been attached to an HTMLMediaElement!"),void this.emit("error",{errno:f.ERRORNO.MEDIASOURCE_ERROR,errmsg:"MediaSource has been attached to an HTMLMediaElement!"});e.hasAudio?this.mimeCodec.audio='audio/mp4; codecs="'+e.audioCodec+'"':this.hasAudio=!1,e.hasVideo?this.mimeCodec.video='video/mp4; codecs="'+e.videoCodec+'"':this.hasVideo=!1;var t=this.mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose)}},{key:"onSourceOpen",value:function(){c.default.verbose(this.tag,"MediaSource onSourceOpen"),this.mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this.hasAudio&&this.addSourceBuffer("audio"),this.hasVideo&&this.addSourceBuffer("video"),this.hasQueueList()&&this.doUpdate(),this.emit("source_open")}},{key:"addSourceBuffer",value:function(e){var t=this;this.sourceBuffer[e]=this.mediaSource.addSourceBuffer(this.mimeCodec[e]),c.default.verbose(this.tag,"add sourcebuffer "+e);var n=this.sourceBuffer[e];n.addEventListener("error",this.e.onSourceBufferError),n.addEventListener("abort",function(){return c.default.verbose(t.tag,"sourceBuffer: abort")}),n.addEventListener("updateend",function(){t.sourceBuffer&&(t.hasRemoveList()?(t.removeRangesList.video.length&&t.cleanRangesList("video"),t.removeRangesList.audio.length&&t.cleanRangesList("audio")):t.hasQueueList()?t.doUpdate():t.complete&&!t.sourceBuffer[e].updating&&t.endOfStream(),t.emit("updateend"))})}},{key:"hasRemoveList",value:function(){return this.removeRangesList.video.length||this.removeRangesList.audio.length}},{key:"hasQueueList",value:function(){return this.queue.video.length||this.queue.audio.length}},{key:"doUpdate",value:function(){for(var e in this.queue)if(this.queue[e].length>0&&!this.sourceBuffer[e].updating){var t=this.queue[e].shift();this.appendBuffer(t,e)}}},{key:"sourceBufferEvent",value:function(){var e=this;this.on("mediaSegment",function(t){var n=t.data,i=n.type;e.emit("player-event",{type:l.PLAYER_EVENTS.MEDIA_SEGMENT,byteLength:n.data.byteLength,ts:Date.now()}),e.needCleanupSourceBuffer(i)&&e.doCleanupSourceBuffer(i),e.queue[i].push(n.data),e.sourceBuffer[i]&&!e.hasRemoveList()&&e.doUpdate()}),this.on("mediaSegmentInit",function(t){e.emit("player-event",{type:l.PLAYER_EVENTS.MEDIA_SEGMENT_INIT,ts:Date.now()});var n=t.data,i=n.type;e.queue[i].push(n.data)})}},{key:"needCleanupSourceBuffer",value:function(e){var t=this.video.currentTime,n=this.video.buffered;return n.length>=1&&t-n.start(0)>=this.config.autoCleanupMaxBackwardDuration}},{key:"doCleanupSourceBuffer",value:function(e){for(var t=this.video.currentTime,n=this.sourceBuffer[e],i=n.buffered,r=!1,o=0;o<i.length;o++){var a=i.start(o),s=i.end(o);if(a<=t&&t<s+3&&t-a>=this.config.autoCleanupMaxBackwardDuration){r=!0;var u=t-this.config.autoCleanupMinBackwardDuration;this.removeRangesList[e].push({start:a,end:u})}}r&&!this.sourceBuffer[e].updating&&this.cleanRangesList(e)}},{key:"cleanRangesList",value:function(e){if(!this.sourceBuffer[e].updating)for(var t=this.sourceBuffer[e];this.removeRangesList[e].length&&!t.updating;){var n=this.removeRangesList[e].shift();t.remove(n.start,n.end)}}},{key:"appendBuffer",value:function(e,t){if(this.sourceBuffer[t])try{this.sourceBuffer[t].appendBuffer(e.buffer)}catch(r){var n=this.video.currentTime-3;if(console.log("removeEnd",n),n>0)for(var i in this.sourceBuffer)this.sourceBuffer[i].remove(0,n);this.queue[t].unshift(e),setTimeout(this.doUpdate.bind(this),100),console.error(r)}}},{key:"onSourceEnded",value:function(){c.default.verbose(this.tag,"MediaSource onSourceEnded")}},{key:"onSourceClose",value:function(){c.default.verbose(this.tag,"MediaSource onSourceClose"),this.mediaSource&&null!==this.e&&(this.mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this.mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this.mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}},{key:"onSourceBufferError",value:function(e){this.emit("error",{errnono:f.ERRORNO.SOURCEBUFFER_ERROR,errmsg:e.message}),c.default.error(this.tag,"SourceBuffer Error: "+e)}},{key:"seek",value:function(){for(var e in this.sourceBuffer){var t=this.sourceBuffer[e];if(t){if("open"===this.mediaSource.readyState)try{t.abort()}catch(e){this.emit("error",{errno:f.ERRORNO.SBABORT_ERROR,errmsg:e}),c.default.error(this.tag,e.message)}this.queue[e]=[];for(var n=0;n<t.buffered.length;n++){var i=t.buffered.start(n),r=t.buffered.end(n);this.removeRangesList[e].push({start:i,end:r})}t.updating||this.cleanRangesList(e)}}}},{key:"resume",value:function(){this.doUpdate()}},{key:"pause",value:function(){}},{key:"endOfStream",value:function(){if(this.mediaSource){var e=this.mediaSource;this.complete=!0;var t=this.sourceBuffer;if(t.video&&t.video.updating||t.audio&&t.audio.updating)return;if("open"===e.readyState)try{e.endOfStream(),this.complete=!1}catch(e){c.default.verbose(this.tag,e),this.emit("error",{errno:f.ERRORNO.ENDOFSTREAM_ERROR,errmsg:e})}}}},{key:"destroy",value:function(){if(this.mediaSource){var e=this.mediaSource;this.queue={video:[],audio:[]},this.sourceBuffer={video:null,audio:null},this.mimeCodec={video:null,audio:null};var t=this.sourceBuffer;this.complete=!1,this.endOfStream(),t&&("closed"!==e.readyState&&(e.removeSourceBuffer(t),t.removeEventListener("error",this.e.onSourceBufferError),t.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)),this.sourceBuffer=null),e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this.mediaSource=null}this.off("mediaSegmentInit"),this.off("mediaSegment")}}]),t}(s.CustEvent);t.default=d},function(e,t,n){e.exports={default:n(81),__esModule:!0}},function(e,t,n){n(29),n(53),e.exports=n(38).f("iterator")},function(e,t,n){var i=n(30),r=n(23);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),u=i(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var i=n(33),r=n(18),o=n(26),a={};n(9)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(5),r=n(7),o=n(20);e.exports=n(6)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,u=0;s>u;)i.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var i=n(12),r=n(34),o=n(86);e.exports=function(e){return function(t,n,a){var s,u=i(t),c=r(u.length),f=o(a,c);if(e&&n!=n){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var i=n(30),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(11),r=n(22),o=n(35)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var i=n(89),r=n(90),o=n(19),a=n(12);e.exports=n(47)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(92),__esModule:!0}},function(e,t,n){n(93),n(55),n(99),n(100),e.exports=n(0).Symbol},function(e,t,n){"use strict";var i=n(1),r=n(11),o=n(6),a=n(2),s=n(49),u=n(94).KEY,c=n(10),f=n(36),l=n(26),d=n(25),h=n(3),v=n(38),p=n(39),m=n(95),y=n(96),g=n(7),b=n(8),_=n(22),w=n(12),k=n(32),S=n(18),E=n(33),x=n(97),T=n(98),O=n(40),A=n(5),R=n(20),M=T.f,D=A.f,B=x.f,C=i.Symbol,L=i.JSON,I=L&&L.stringify,P=h("_hidden"),j=h("toPrimitive"),N={}.propertyIsEnumerable,U=f("symbol-registry"),F=f("symbols"),V=f("op-symbols"),z=Object.prototype,G="function"==typeof C&&!!O.f,q=i.QObject,W=!q||!q.prototype||!q.prototype.findChild,H=o&&c(function(){return 7!=E(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=M(z,t);i&&delete z[t],D(e,t,n),i&&e!==z&&D(z,t,i)}:D,K=function(e){var t=F[e]=E(C.prototype);return t._k=e,t},Y=G&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},X=function(e,t,n){return e===z&&X(V,t,n),g(e),t=k(t,!0),g(n),r(F,t)?(n.enumerable?(r(e,P)&&e[P][t]&&(e[P][t]=!1),n=E(n,{enumerable:S(0,!1)})):(r(e,P)||D(e,P,S(1,{})),e[P][t]=!0),H(e,t,n)):D(e,t,n)},$=function(e,t){g(e);for(var n,i=m(t=w(t)),r=0,o=i.length;o>r;)X(e,n=i[r++],t[n]);return e},J=function(e,t){return void 0===t?E(e):$(E(e),t)},Z=function(e){var t=N.call(this,e=k(e,!0));return!(this===z&&r(F,e)&&!r(V,e))&&(!(t||!r(this,e)||!r(F,e)||r(this,P)&&this[P][e])||t)},Q=function(e,t){if(e=w(e),t=k(t,!0),e!==z||!r(F,t)||r(V,t)){var n=M(e,t);return!n||!r(F,t)||r(e,P)&&e[P][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=B(w(e)),i=[],o=0;n.length>o;)r(F,t=n[o++])||t==P||t==u||i.push(t);return i},te=function(e){for(var t,n=e===z,i=B(n?V:w(e)),o=[],a=0;i.length>a;)!r(F,t=i[a++])||n&&!r(z,t)||o.push(F[t]);return o};G||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(V,n),r(this,P)&&r(this[P],e)&&(this[P][e]=!1),H(this,e,S(1,n))};return o&&W&&H(z,e,{configurable:!0,set:t}),K(e)},s(C.prototype,"toString",function(){return this._k}),T.f=Q,A.f=X,n(54).f=x.f=ee,n(27).f=Z,O.f=te,o&&!n(16)&&s(z,"propertyIsEnumerable",Z,!0),v.f=function(e){return K(h(e))}),a(a.G+a.W+a.F*!G,{Symbol:C});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ne.length>ie;)h(ne[ie++]);for(var re=R(h.store),oe=0;re.length>oe;)p(re[oe++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return r(U,e+="")?U[e]:U[e]=C(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!G,"Object",{create:J,defineProperty:X,defineProperties:$,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=c(function(){O.f(1)});a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return O.f(_(e))}}),L&&a(a.S+a.F*(!G||c(function(){var e=C();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(b(t)||void 0!==e)&&!Y(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),i[1]=t,I.apply(L,i)}}),C.prototype[j]||n(9)(C.prototype,j,C.prototype.valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(i.JSON,"JSON",!0)},function(e,t,n){var i=n(25)("meta"),r=n(8),o=n(11),a=n(5).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(10)(function(){return u(Object.preventExtensions({}))}),f=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},l=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[i].i},d=function(e,t){if(!o(e,i)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[i].w},h=function(e){return c&&v.NEED&&u(e)&&!o(e,i)&&f(e),e},v=e.exports={KEY:i,NEED:!1,fastKey:l,getWeak:d,onFreeze:h}},function(e,t,n){var i=n(20),r=n(40),o=n(27);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var i=n(21);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(12),r=n(54).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):r(i(e))}},function(e,t,n){var i=n(27),r=n(18),o=n(12),a=n(32),s=n(11),u=n(48),c=Object.getOwnPropertyDescriptor;t.f=n(6)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){n(39)("asyncIterator")},function(e,t,n){n(39)("observable")},function(e,t,n){e.exports={default:n(102),__esModule:!0}},function(e,t,n){n(103);var i=n(0).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(2);i(i.S+i.F*!n(6),"Object",{defineProperty:n(5).f})},function(e,t,n){n(105),e.exports=n(0).Object.assign},function(e,t,n){var i=n(2);i(i.S+i.F,"Object",{assign:n(106)})},function(e,t,n){"use strict";var i=n(6),r=n(20),o=n(40),a=n(27),s=n(22),u=n(51),c=Object.assign;e.exports=!c||n(10)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=i})?function(e,t){for(var n=s(e),c=arguments.length,f=1,l=o.f,d=a.f;c>f;)for(var h,v=u(arguments[f++]),p=l?r(v).concat(l(v)):r(v),m=p.length,y=0;m>y;)h=p[y++],i&&!d.call(v,h)||(n[h]=v[h]);return n}:c},function(e,t,n){e.exports={default:n(108),__esModule:!0}},function(e,t,n){n(109);var i=n(0).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(2);i(i.S,"Object",{create:n(33)})},function(e,t,n){n(111),e.exports=n(0).Object.keys},function(e,t,n){var i=n(22),r=n(20);n(112)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(2),r=n(0),o=n(10);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(114),__esModule:!0}},function(e,t,n){n(115),e.exports=n(0).Number.isInteger},function(e,t,n){var i=n(2);i(i.S,"Number",{isInteger:n(116)})},function(e,t,n){var i=n(8),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},function(e,t,n){e.exports={default:n(118),__esModule:!0}},function(e,t,n){n(119),e.exports=n(0).Number.parseFloat},function(e,t,n){var i=n(2),r=n(120);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(e,t,n){var i=n(1).parseFloat,r=n(121).trim;e.exports=1/i(n(58)+"-0")!=-1/0?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},function(e,t,n){var i=n(2),r=n(23),o=n(10),a=n(58),s="["+a+"]",u="​",c=RegExp("^"+s+s+"*"),f=RegExp(s+s+"*$"),l=function(e,t,n){var r={},s=o(function(){return!!a[e]()||u[e]()!=u}),c=r[e]=s?t(d):a[e];n&&(r[n]=c),i(i.P+i.F*s,"String",r)},d=l.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(f,"")),e};e.exports=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(59),c=i(u),f=n(4),l=n(128),d=i(l),h=n(61),v=i(h),p=n(14),m=n(15),y=function(e){function t(e,n,i){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.config=n||{},a.tag="transmuxer",a.loader=null,a.CPU=null,a.keyframePoint=!1,a.w=null,a.config.webWorker&&(a.onWorkMessage=a.onWorkMessage.bind(a),a.w=(0,d.default)(139),a.w.addEventListener("message",a.onWorkMessage),a.w.postMessage(JSON.parse(JSON.stringify({cmd:"init",data:n})))),a.lock=0,a}return a(t,e),s(t,[{key:"onWorkMessage",value:function(e){this.parseCallback.call(this,e.data)}},{key:"loadSource",value:function(){this.config.webWorker?this.w.postMessage({cmd:"loadSource"}):(this.loader=new c.default(this.config),this.loader.arrivalDataCallback=this.arrivalDataCallback.bind(this),this.loaderBindEvent(this.loader),this.loader.open())}},{key:"loaderBindEvent",value:function(e){var t=this;e.on("end",function(){t.emit("end")}),e.on("error",function(e){t.emit("error",e.data)}),e.on("heartbeat",function(e){t.emit("heartbeat",e.data)}),this.loader.on("player-event",function(e){t.emit("player-event",e.data)})}},{key:"loaderUnbindEvent",value:function(e){e.off("end"),e.off("error"),e.off("heartbeat"),e.off("player-event")}},{key:"arrivalDataCallback",value:function(e,t,n){var i=this;return this.CPU||(this.CPU=new v.default(this.config),this.CPU.onInitSegment=this.onRemuxerInitSegmentArrival.bind(this),this.CPU.onMediaSegment=this.onRemuxerMediaSegmentArrival.bind(this),this.CPU.onMediaInfo=this.onMediaInfo.bind(this),this.CPU.onCdnDropFrame=this.onCdnDropFrame.bind(this),this.CPU.on("error",function(e){i.emit("error",{errno:p.ERRORNO.CODEC_ERROR,errmsg:e.data})})),void 0!==n&&this.CPU.seek(n),this.emit("player-event",{type:m.PLAYER_EVENTS.MEDIA_DEMUX_FLV,byteLength:e.byteLength,ts:Date.now()}),this.CPU.setflv(e)}},{key:"parseCallback",value:function(e){switch(e.cmd){case"mediaSegmentInit":this.emit("mediaSegmentInit",e.source);break;case"mediaSegment":this.emit("mediaSegment",e.source);break;case"mediainfo":this.mediaInfo=e.source,this.emit("mediaInfo",e.source);break;case"end":this.emit("end");break;case"error":this.emit("error",e.source);break;case"player-event":this.emit("player-event",e.source);break;case"heartbeat":this.emit("heartbeat",e.source);break;case"cdnDropFrame":this.emit("cdnDropFrame",{dropAudio:e.source})}}},{key:"onMediaInfo",value:function(e){this.mediaInfo=e,this.emit("mediaInfo",e)}},{key:"onCdnDropFrame",value:function(e){this.emit("cdnDropFrame",{dropAudio:e})}},{key:"onRemuxerInitSegmentArrival",value:function(e,t){this.emit("mediaSegmentInit",{type:"video",data:e}),t&&this.emit("mediaSegmentInit",{type:"audio",data:t})}},{key:"onRemuxerMediaSegmentArrival",value:function(e,t){this.emit("mediaSegment",{type:e,data:t})}},{key:"getMediaInfo",value:function(){return this.mediaInfo}},{key:"pause",value:function(){this.config.webWorker?this.w.postMessage({cmd:"pause"}):this.loader.pause()}},{key:"resume",value:function(){this.config.webWorker?this.w.postMessage({cmd:"resume"}):this.loader.resume()}},{key:"isSeekable",value:function(){return this.mediaInfo.hasKeyframesIndex}},{key:"seek",value:function(e){if(!this.isSeekable())return this.emit("error",{errno:p.ERRORNO.CANNOT_SEEK,errmsg:"这个flv视频不支持seek"}),!1;this.config.webWorker?this.w.postMessage({cmd:"seek",keyframe:e}):this.loader.seek(e.keyframePoint,!1,e.keyframetime)}},{key:"destroy",value:function(){this.config.webWorker?(this.w.postMessage({cmd:"destroy"}),this.w.removeEventListener("message",this.onWorkMessage),this.w.terminate()):(this.loader&&(this.loaderUnbindEvent(this.loader),this.loader.destroy(),this.loader=null),this.CPU&&(this.CPU.off("error"),this.CPU=null))}},{key:"getNearestKeyframe",value:function(e){if(this.mediaInfo&&this.mediaInfo.keyframesIndex){var t=this.mediaInfo.keyframesIndex.times,n=this.mediaInfo.keyframesIndex.filepositions;return function e(i,r){var o=i.length,a=Math.floor(o/2);if(1===o){var s=t.indexOf(i[0]);return{keyframetime:i[0],keyframePoint:n[s]}}if(i[a]>r)return e(i.slice(0,a),r);if(i[a]<r)return e(i.slice(a),r);var u=t.indexOf(i[0]);return{keyframetime:i[0],keyframePoint:n[u]}}(t,e)}return 0}}]),t}(f.CustEvent);t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(124),c=i(u),f=n(4),l=n(43),d=i(l),h=n(14),v=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.tag="fetch",i.fetching=!1,i.config=n,i.range={from:0,to:524288},i.src=e,i.totalRange=null,i.block=524288,i.reader=null,i.requestAbort=!1,i.arrivalDataCallback=null,i.bytesStart=0,i.heartbeat=null,i}return a(t,e),s(t,null,[{key:"isSupport",value:function(){return!(!self.fetch||!self.ReadableStream)}}]),s(t,[{key:"open",value:function(e,t){var n=this;this.requestAbort=!1;var i=new Headers,r=e||{from:0,to:-1};if(!this.config.isLive){this.range.from=r.from,this.range.to=r.to;var o=(0,c.default)(r,this.config);if("string"==typeof o)this.src=this.config.src+o;else for(var a in o)i.append(a,o[a])}t&&(this.bytesStart=0),this.bytesStart=e.from;var s={method:"GET",headers:i,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},u=Date.now();fetch(this.src,s).then(function(e){if(n.emit("performance",{type:"receive-first-package-duration",value:Date.now()-u}),e.ok){var i=e.body.getReader();return n.pump(i,t)}}).catch(function(e){n.emit("error",{errno:h.ERRORNO.NET_ERROR,errmsg:e.toString()})})}},{key:"pause",value:function(){this.requestAbort=!0}},{key:"pump",value:function(e,t){var n=this;return e.read().then(function(i){if(i.done)n.emit("end"),d.default.verbose(n.tag,"load end");else{if(!0===n.requestAbort)return n.requestAbort=!1,e.cancel();var r=i.value.buffer;n.arrivalDataCallback&&(n.arrivalDataCallback(r,n.bytesStart,t),n.bytesStart+=r.byteLength),setTimeout(function(){n.pump(e)},0)}}).catch(function(e){n.emit("error",{errno:h.ERRORNO.NET_ERROR,errmsg:e.message})})}}]),t}(f.CustEvent);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("range"===t.seekType){var n={},i=void 0;return i=-1!==e.to?"bytes="+e.from.toString()+"-"+e.to.toString():"bytes="+e.from.toString()+"-",n.Range=i,n}return-1!==e.to?"?start="+e.from.toString()+"&end="+e.to.toString():"?start="+e.from.toString()}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(60),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(4),f=n(14),l=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.tag="RangeLoader",o.xhr=null,o.src=e,o.totalLength=null,o.chunkSizeKB=524288,o.range={},o.bytesStart=0,o.needSeek=!1,o.keyframePoint=null,o}return o(t,e),a(t,null,[{key:"isSupport",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(e){return!1}}}]),a(t,[{key:"open",value:function(e,t){var n=this.xhr=new XMLHttpRequest;n.open("GET",this.src,!0),n.responseType="arraybuffer",n.onreadystatechange=this.onReadyStateChange.bind(this),n.onprogress=this.onProgress.bind(this),n.onload=this.onLoad.bind(this),n.onerror=this.onXhrError.bind(this);var i=e||{from:0,to:-1};this.range.from=i.from,-1===i.to&&(i.to=i.from+this.chunkSizeKB),t&&(this.bytesStart=e.from,this.needSeek=!0,this.keyframePoint=t),this.range.to=i.to;var r=(0,u.default)(i).headers;for(var o in r)n.setRequestHeader(o,r[o]);n.send()}},{key:"pause",value:function(){this.abort()}},{key:"abort",value:function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr.abort(),this.xhr=null)}},{key:"destroy",value:function(){this.xhr&&(this.abort(),this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr=null),this.totalLength=null,this.bytesStart=null,this.range={}}},{key:"onReadyStateChange",value:function(e){var t=this.xhr;if(2===t.readyState&&(t.status<200||t.status>299)){var n={from:this.range.from,to:this.range.to,url:this.src,msg:"http Error: http code "+t.status};this.emit("error",{errno:f.ERRORNO.NET_ERROR,errmsg:n})}}},{key:"onProgress",value:function(e){this.totalLength||(this.totalLength=e.total,this.abort(),this.open())}},{key:"onLoad",value:function(e){if(this.totalLength&&this.arrivalDataCallback){var t=e.target.response;this.needSeek?(this.needSeek=!1,this.arrivalDataCallback(t,this.bytesStart,this.keyframePoint)):this.arrivalDataCallback(t,this.bytesStart),this.bytesStart+=t.byteLength,this.open({from:this.bytesStart,to:-1})}}},{key:"onXhrError",value:function(e){var t={from:this.range.from,to:this.range.to,url:this.src,msg:e.constructor.name+" "+e.type};this.emit("error",{errno:f.ERRORNO.NET_ERROR,errmsg:t})}}]),t}(c.CustEvent);t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(4),u=n(14),c=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.tag="WebSocket",o.src=e,o._ws=null,o._requestAbort=!1,o._receivedLength=0,o}return o(t,e),a(t,null,[{key:"isSupported",value:function(){try{return void 0!==window.WebSocket}catch(e){return!1}}}]),a(t,[{key:"open",value:function(e,t){try{var n=this._ws=new self.WebSocket(this.src);n.binaryType="arraybuffer",n.onopen=this.onWebSocketOpen.bind(this),n.onclose=this.onWebSocketClose.bind(this),n.onmessage=this.onWebSocketMessage.bind(this),n.onerror=this.onWebSocketError.bind(this)}catch(e){var i={code:e.code,msg:e.message};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:i})}}},{key:"pause",value:function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null}},{key:"onWebSocketClose",value:function(e){if(!0===this._requestAbort)return void(this._requestAbort=!1);this.emit("end")}},{key:"onWebSocketOpen",value:function(){}},{key:"onWebSocketMessage",value:function(e){var t=this;if(e.data instanceof ArrayBuffer)this.dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t.dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{var i={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:i})}}},{key:"dispatchArrayBuffer",value:function(e){var t=e,n=this.receivedLength;this.receivedLength+=t.byteLength,this.arrivalDataCallback&&this.arrivalDataCallback(t,n)}},{key:"onWebSocketError",value:function(e){var t={code:e.code,msg:e.message};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:t})}}]),t}(s.CustEvent);t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(60),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(4),f=n(14),l=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.tag="mozChunkLoader",o.xhr=null,o.src=e,o.config=n,o.totalLength=null,o.chunkSizeKB=393216,o.range={},o.bytesStart=0,o.keyframePoint=null,o}return o(t,e),a(t,null,[{key:"isSupport",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(e){return!1}}}]),a(t,[{key:"open",value:function(e,t){var n=this.xhr=new XMLHttpRequest;if(n.open("GET",this.src,!0),n.responseType="moz-chunked-arraybuffer",n.onreadystatechange=this.onReadyStateChange.bind(this),n.onprogress=this.onProgress.bind(this),n.onload=this.onLoadEnd.bind(this),n.onerror=this.onXhrError.bind(this),!this.config.isLive){var i=e||{from:0,to:-1};this.range.from=i.from,this.range.to=i.to,t&&(this.needSeek=!0,this.keyframePoint=t);var r=(0,u.default)(i).headers;for(var o in r)n.setRequestHeader(o,r[o])}n.send()}},{key:"pause",value:function(){this.abort()}},{key:"abort",value:function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr.abort(),this.xhr=null)}},{key:"destroy",value:function(){this.xhr&&(this.abort(),this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr=null),this.totalLength=null,this.bytesStart=null,this.range={}}},{key:"onReadyStateChange",value:function(e){var t=this.xhr;if(2===t.readyState&&(t.status<200||t.status>299)){var n={from:this.range.from,to:this.range.to,url:this.src,msg:"http Error: http code "+t.status};this.emit("error",{errno:f.ERRORNO.NET_ERROR,errmsg:n})}}},{key:"onProgress",value:function(e){this.totalLength||(this.totalLength=e.total,null!==e.total&&0!==e.total&&(this.totalLength=e.total));var t=e.target.response;this.needSeek?(this.needSeek=!1,this.arrivalDataCallback(t,this.bytesStart,this.keyframePoint)):this.arrivalDataCallback(t,this.bytesStart),this.bytesStart+=t.byteLength}},{key:"onLoadEnd",value:function(e){this.emit(this.tag,"video load end")}},{key:"onXhrError",value:function(e){var t={from:this.range.from,to:this.range.to,url:this.src,msg:e.constructor.name+" "+e.type};this.emit("error",{errno:f.ERRORNO.NET_ERROR,errmsg:t})}}]),t}(c.CustEvent);t.default=l},function(e,t,n){function i(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var i=t(t.s=ENTRY_MODULE);return i.default||i}function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){return!isNaN(1*e)}function a(e,t,i){var a={};a[i]=[];var s=t.toString(),u=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return a;for(var l,d=u[1],h=new RegExp("(\\\\n|\\W)"+r(d)+f,"g");l=h.exec(s);)"dll-reference"!==l[3]&&a[i].push(l[3]);for(h=new RegExp("\\("+r(d)+'\\("(dll-reference\\s('+c+'))"\\)\\)'+f,"g");l=h.exec(s);)e[l[2]]||(a[i].push(l[1]),e[l[2]]=n(l[1]).m),a[l[2]]=a[l[2]]||[],a[l[2]].push(l[4]);for(var v=Object.keys(a),p=0;p<v.length;p++)for(var m=0;m<a[v[p]].length;m++)o(a[v[p]][m])&&(a[v[p]][m]=1*a[v[p]][m]);return a}function s(e){return Object.keys(e).reduce(function(t,n){return t||e[n].length>0},!1)}function u(e,t){for(var n={main:[t]},i={main:[]},r={main:{}};s(n);)for(var o=Object.keys(n),u=0;u<o.length;u++){var c=o[u],f=n[c],l=f.pop();if(r[c]=r[c]||{},!r[c][l]&&e[c][l]){r[c][l]=!0,i[c]=i[c]||[],i[c].push(l);for(var d=a(e,e[c][l],c),h=Object.keys(d),v=0;v<h.length;v++)n[h[v]]=n[h[v]]||[],n[h[v]]=n[h[v]].concat(d[h[v]])}}return i}var c="[\\.|\\-|\\+|\\w|/|@]+",f="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+c+").*?\\)";e.exports=function(e,t){t=t||{};var r={main:n.m},o=t.all?{main:Object.keys(r.main)}:u(r,e),a="";Object.keys(o).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;o[e][t];)t++;o[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map(function(t){return JSON.stringify(t)+": "+r[e][t].toString()}).join(",")+"});\n"}),a=a+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map(function(e){return JSON.stringify(e)+": "+r.main[e].toString()}).join(",")+"}))(self);";var s=new window.Blob([a],{type:"text/javascript"});if(t.bare)return s;var c=window.URL||window.webkitURL||window.mozURL||window.msURL,f=c.createObjectURL(s),l=new window.Worker(f);return l.objectURL=f,l}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(130),s=i(a),u=n(62),c=i(u),f=n(44),l=i(f),d=function(){function e(){r(this,e),this.tempUint8=new Uint8Array,this.arrTag=[],this.index=0,this.tempArr=[],this.stop=!1,this.offset=0,this.frist=!0,this._hasAudio=!1,this._hasVideo=!1,this._dispose=!1,this.busy=!1,this.busyArr=[]}return o(e,[{key:"setFlv",value:function(e){return this.busy=!0,this._dispose=!1,this.stop=!1,this.arrTag=[],this.index=0,this.tempUint8=e,this.tempUint8.length>13&&70==this.tempUint8[0]&&76==this.tempUint8[1]&&86==this.tempUint8[2]?(this.probe(this.tempUint8.buffer),this.read(9),this.read(4),this.parse(),this.frist=!1,this.busy=!1,this.offset):this.frist?this.offset:(this.parse(),this.offset)}},{key:"probe",value:function(e){var t=new Uint8Array(e),n={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return n;var i=(4&t[4])>>>2!=0,r=0!=(1&t[4]);return i||r?(this._hasAudio=c.default._hasAudio=i,this._hasVideo=c.default._hasVideo=r,{match:!0,hasAudioTrack:i,hasVideoTrack:r}):n}},{key:"dispose",value:function(){}},{key:"parse",value:function(){for(;this.index<this.tempUint8.length&&!this.stop;){this.offset=this.index;var e=new s.default;if(this.tempUint8.length-this.index>=11){if(e.tagType=this.read(1)[0],e.dataSize=this.read(3),e.Timestamp=this.read(4),e.StreamID=this.read(3),18!=e.tagType&&8!=e.tagType&&9!=e.tagType)throw new l.default("wrong tagType"+e.tagType);this.tempUint8.length-this.index>=this.getBodySum(e.dataSize)+4?(e.body=this.read(this.getBodySum(e.dataSize)),9==e.tagType&&this._hasVideo&&this.arrTag.push(e),8==e.tagType&&this._hasAudio&&this.arrTag.push(e),18==e.tagType&&this.arrTag.push(e),e.size=this.read(4),this.offset=this.index):this.stop=!0}else this.stop=!0}return this.offset}},{key:"read",value:function(e){var t=this.tempUint8.slice(this.index,this.index+e);return this.index+=e,t}},{key:"getBodySum",value:function(e){var t="";return t+=1==e[0].toString(16).length?"0"+e[0].toString(16):e[0].toString(16),t+=1==e[1].toString(16).length?"0"+e[1].toString(16):e[1].toString(16),t+=1==e[2].toString(16).length?"0"+e[2].toString(16):e[2].toString(16),parseInt(t,16)}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.tagType=-1,this.dataSize=-1,this.Timestamp=-1,this.StreamID=-1,this.body=-1,this.time=-1,this.arr=[],this.size=-1}return r(e,[{key:"getTime",value:function(){this.arr=[];for(var e=0;e<this.Timestamp.length;e++)this.arr.push(1==this.Timestamp[e].toString(16).length?"0"+this.Timestamp[e].toString(16):this.Timestamp[e].toString(16));this.arr.pop();var t=this.arr.join("");return this.time=parseInt(t,16),parseInt(t,16)}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(132),s=i(a),u=n(63),c=(i(u),null),f=function(){function e(){r(this,e)}return o(e,null,[{key:"parseObject",value:function(t,n,i){var r=e.parseString(t,n,i),o=e.parseScript(t,n+r.size),a=o.objectEnd;return{data:{name:r.data,value:o.data},size:o.size,objectEnd:a}}},{key:"parseVariable",value:function(t,n,i){return e.parseObject(t,n,i)}},{key:"parseLongString",value:function(e,t,n){var i=new DataView(e,t),r=i.getUint32(0,!c),o=void 0;return o=r>0?(0,s.default)(new Uint8Array(e,t+4,r)):"",{data:o,size:4+r}}},{key:"parseDate",value:function(e,t,n){var i=new DataView(e,t),r=i.getFloat64(0,!c);return r+=60*i.getInt16(8,!c)*1e3,{data:new Date(r),size:10}}},{key:"parseString",value:function(e,t,n){var i=new DataView(e,t),r=i.getUint16(0,!c),o=void 0;return o=r>0?(0,s.default)(new Uint8Array(e,t+2,r)):"",{data:o,size:2+r}}},{key:"parseMetadata",value:function(t){c=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}();var n=e.parseScript(t,0),i=e.parseScript(t,n.size,t.length-n.size),r={};return r[n.data]=i.data,r}},{key:"parseScript",value:function(t,n,i){var r=n,o=new Uint8Array(t),a=o.buffer,s=new DataView(a,0,i),u=null,f=s.getUint8(r);switch(r+=1,f){case 0:u=s.getFloat64(r,!c),r+=8;break;case 1:u=!!s.getUint8(r),r+=1;break;case 2:var l=e.parseString(a,r);u=l.data,r+=l.size;break;case 3:u={};var d=0;for(9==(16777215&s.getUint32(i-4,!c))&&(d=3);r<i-4;){var h=e.parseObject(a,r,i-n-d);if(h.objectEnd)break;u[h.data.name]=h.data.value,r=h.size}if(r<=i-3){9===(16777215&v.getUint32(r-1,!c))&&(r+=3)}break;case 8:u={},r+=4;for(9==(16777215&s.getUint32(i-4,!c))&&3;r<i-8;){var p=e.parseVariable(a,r);if(p.objectEnd)break;u[p.data.name]=p.data.value,r=p.size}if(r<=i-3){9===(16777215&s.getUint32(r-1,!c))&&(r+=3)}break;case 9:u=void 0,r=1,!0;break;case 10:u=[];var m=s.getUint32(r,!c);r+=4;for(var y=0;y<m;y++){var g=e.parseScript(a,r);u.push(g.data),r=g.size}break;case 11:var b=e.parseDate(a,r+1,i-1);u=b.data,r+=b.size;break;case 12:var _=e.parseString(a,r+1,i-1);u=_.data,r+=_.size;break;default:r=i,console.log("AMF","Unsupported AMF value type "+f)}return{data:u,size:r}}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e){for(var t=[],n=e,i=0,o=e.length;i<o;)if(n[i]<128)t.push(String.fromCharCode(n[i])),++i;else{if(n[i]<192);else if(n[i]<224){if(r(n,i,1)){var a=(31&n[i])<<6|63&n[i+1];if(a>=128){t.push(String.fromCharCode(65535&a)),i+=2;continue}}}else if(n[i]<240){if(r(n,i,2)){var s=(15&n[i])<<12|(63&n[i+1])<<6|63&n[i+2];if(s>=2048&&55296!=(63488&s)){t.push(String.fromCharCode(65535&s)),i+=3;continue}}}else if(n[i]<248&&r(n,i,3)){var u=(7&n[i])<<18|(63&n[i+1])<<12|(63&n[i+2])<<6|63&n[i+3];if(u>65536&&u<1114112){u-=65536,t.push(String.fromCharCode(u>>>10|55296)),t.push(String.fromCharCode(1023&u|56320)),i+=4;continue}}t.push(String.fromCharCode(65533)),++i}return t.join("")}function r(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!=(192&i[++t]))return!1;return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.TAG=this.constructor.name,this._buffer=t,this._buffer_index=0,this._total_bytes=t.byteLength,this._total_bits=8*t.byteLength,this._current_word=0,this._current_word_bits_left=0}return r(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t}},{key:"readBits",value:function(e){if(e>32)throw new InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var n=this._current_word_bits_left?this._current_word:0;n>>>=32-this._current_word_bits_left;var i=e-this._current_word_bits_left;this._fillCurrentWord();var r=Math.min(i,this._current_word_bits_left),o=this._current_word>>>32-r;return this._current_word<<=r,this._current_word_bits_left-=r,n=n<<r|o}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e=void 0;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return r(e,[{key:"isComplete",value:function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t}},{key:"isSeekable",value:function(){return!0===this.hasKeyframesIndex}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(136),s=i(a),u=n(137),c=i(u),f=n(64),l=i(f),d=n(138),h=function(){function e(t){r(this,e),this.TAG="MP4Remuxer",this._isLive=!0===t.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new d.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new d.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!c.default.chrome||!(c.default.version.major<50||50===c.default.version.major&&c.default.version.build<2661)),this._fillSilentAfterSeek=c.default.msedge||c.default.msie,this._mp3UseMpegAudio=!c.default.firefox}return o(e,[{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}},{key:"bindDataSource",value:function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}},{key:"insertDiscontinuity",value:function(){this._audioNextDts=this._videoNextDts=void 0}},{key:"seek",value:function(e){this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}},{key:"remux",value:function(e,t){if(!this._onMediaSegment)throw new IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)}},{key:"_onTrackMetadataReceived",value:function(e,t){var n=null,i="mp4",r=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(i="mpeg",r="",n=new Uint8Array):n=l.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=l.default.generateInitSegment(t)}if(!this._onInitSegment)throw new IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:r,container:e+"/"+i,mediaDuration:t.duration})}},{key:"_calculateDtsBase",value:function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"_remuxAudio",value:function(e){if(null!=this._audioMeta){var t=e,n=t.samples,i=void 0,r=-1,o=-1,a=this._audioMeta.refSampleDuration,u="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,c=this._dtsBaseInited&&void 0===this._audioNextDts,f=!1;if(n&&!(n.length<=1)){var h=0,v=null,p=0;u?(h=0,p=t.length):(h=8,p=8+t.length);var m=n[0].dts-this._dtsBase;if(this._audioNextDts)i=m-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())i=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(f=!0);else{var y=this._audioSegmentInfoList.getLastSampleBefore(m);if(null!=y){var g=m-(y.originalDts+y.duration);g<=3&&(g=0);var b=y.dts+y.duration+g;i=m-b}else i=0}if(f){var _=m-i,w=this._videoSegmentInfoList.getLastSegmentBefore(m);if(null!=w&&w.beginDts<_){var k=s.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(k){var S=w.beginDts,E=_-w.beginDts;Log.v(this.TAG,"InsertPrefixSilentAudio: dts: "+S+", duration: "+E),n.unshift({unit:k,dts:S,pts:S}),p+=k.byteLength}}else f=!1}var x=[];i=0;for(var T=0;T+1<n.length;T++){var O=n[T],A=(O.unit,O.dts-this._dtsBase),R=A-i;-1===r&&(r=R);var M=0;if(T!==n.length-1){M=n[T+1].dts-this._dtsBase-i-R}else M=x.length>=1?x[x.length-1].duration:Math.floor(a);x.push({dts:R,pts:R,cts:0,unit:O.unit,size:O.unit.byteLength,duration:M,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}})}if(u)v=new Uint8Array(p);else{for(var D=8,B=0;B<x.length;++B)D+=x[B].size;v=new Uint8Array(D),v[0]=D>>>24&255,v[1]=D>>>16&255,v[2]=D>>>8&255,v[3]=255&D,v.set(l.default.types.mdat,4)}for(var C=0;C<x.length;C++){var L=x[C].unit;v.set(L,h),h+=L.byteLength}var I=x[x.length-1];o=I.dts+I.duration,this._audioNextDts=o;var P=new d.MediaSegmentInfo;P.beginDts=r,P.endDts=o,P.beginPts=r,P.endPts=o,P.originalBeginDts=x[0].originalDts,P.originalEndDts=I.originalDts+I.duration,P.firstSample=new d.SampleInfo(x[0].dts,x[0].pts,x[0].duration,x[0].originalDts,!1),P.lastSample=new d.SampleInfo(I.dts,I.pts,I.duration,I.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(P),t.samples=x,t.sequenceNumber++;var j=null;j=u?new Uint8Array:l.default.moof(t,r),t.samples=[n[n.length-1]],t.length=0;var N={type:"audio",data:this._mergeBoxes(j,v).buffer,sampleCount:x.length,info:P};u&&c&&(N.timestampOffset=r),this._onMediaSegment("audio",N)}}}},{key:"_remuxVideo",value:function(e){if(null!=this._videoMeta){var t=e,n=t.samples,i=void 0,r=-1,o=-1,a=-1,s=-1;if(n&&!(n.length<=1)){var u=n[0].dts-this._dtsBase;if(this._videoNextDts)i=Math.max(u-this._videoNextDts,0);else if(this._videoSegmentInfoList.isEmpty())i=0;else{var c=this._videoSegmentInfoList.getLastSampleBefore(u);if(null!=c){var f=u-(c.originalDts+c.duration);f<=3&&(f=0);var h=c.dts+c.duration+f;i=u-h}else i=0}var v=new d.MediaSegmentInfo,p=[],m=i;i=0;for(var y=0;y+1<n.length;y++){var g=n[y],b=g.dts-this._dtsBase-(0==y?m:0),_=g.isKeyframe,w=b-i,k=g.cts,S=w+k;-1===r&&(r=w,a=S);var E=0;if(y!==n.length-1){E=n[y+1].dts-this._dtsBase-i-w}else E=p.length>=1?p[p.length-1].duration:Math.floor(this._videoMeta.refSampleDuration);if(_){var x=new d.SampleInfo(w,S,E,g.dts,!0);x.fileposition=g.fileposition,v.appendSyncPoint(x)}p.push({dts:w,pts:S,cts:k,units:g.units,size:g.length,isKeyframe:_,duration:E,originalDts:b,flags:{isLeading:0,dependsOn:_?2:1,isDependedOn:_?1:0,hasRedundancy:0,isNonSync:_?0:1}})}for(var T=8,O=8,A=0;A<p.length;++A)O+=p[A].size;var R=new Uint8Array(O);R[0]=O>>>24&255,R[1]=O>>>16&255,R[2]=O>>>8&255,R[3]=255&O,R.set(l.default.types.mdat,4);for(var M=0;M<p.length;M++)for(var D=p[M].units;D.length;){var B=D.shift(),C=B.data;R.set(C,T),T+=C.byteLength}var L=p[p.length-1];if(o=L.dts+L.duration,s=L.pts+L.duration,this._videoNextDts=o,v.beginDts=r,v.endDts=o,v.beginPts=a,v.endPts=s,v.originalBeginDts=p[0].originalDts,v.originalEndDts=L.originalDts+L.duration,v.firstSample=new d.SampleInfo(p[0].dts,p[0].pts,p[0].duration,p[0].originalDts,p[0].isKeyframe),v.lastSample=new d.SampleInfo(L.dts,L.pts,L.duration,L.originalDts,L.isKeyframe),this._isLive||this._videoSegmentInfoList.append(v),t.samples=p,t.sequenceNumber++,this._forceFirstIDR){var I=p[0].flags;I.dependsOn=2,I.isNonSync=0}var P=l.default.moof(t,r);t.samples=[n[n.length-1]],t.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(P,R).buffer,sampleCount:p.length,info:v})}}}},{key:"_mergeBoxes",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}},{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e}}]),e}();t.default=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};!function(){var e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],r={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:n[0]||""},o={};if(r.browser){o[r.browser]=!0;var a=r.majorVersion.split(".");o.version={major:parseInt(r.majorVersion,10),string:r.version},a.length>1&&(o.version.minor=parseInt(a[1],10)),a.length>2&&(o.version.build=parseInt(a[2],10))}r.platform&&(o[r.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),(o.rv||o.iemobile)&&(o.rv&&delete o.rv,r.browser="msie",o.msie=!0),o.edge&&(delete o.edge,r.browser="msedge",o.msedge=!0),o.opr&&(r.browser="opera",o.opera=!0),o.safari&&o.android&&(r.browser="android",o.android=!0),o.name=r.browser,o.platform=r.platform;for(var s in i)i.hasOwnProperty(s)&&delete i[s];i=o}(),t.default=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.SampleInfo=function e(t,n,r,o,a){i(this,e),this.dts=t,this.pts=n,this.duration=r,this.originalDts=o,this.isSyncPoint=a,this.fileposition=null},t.MediaSegmentInfo=function(){function e(){i(this,e),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return r(e,[{key:"appendSyncPoint",value:function(e){e.isSyncPoint=!0,this.syncPoints.push(e)}}]),e}(),t.IDRSampleList=function(){function e(){i(this,e),this._list=[]}return r(e,[{key:"clear",value:function(){this._list=[]}},{key:"appendArray",value:function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))}},{key:"getLastSyncPointBeforeDts",value:function(e){if(0==this._list.length)return null;var t=this._list,n=0,i=t.length-1,r=0,o=0,a=i;for(e<t[0].dts&&(n=0,o=a+1);o<=a;){if((r=o+Math.floor((a-o)/2))===i||e>=t[r].dts&&e<t[r+1].dts){n=r;break}t[r].dts<e?o=r+1:a=r-1}return this._list[n]}}]),e}(),t.MediaSegmentInfoList=function(){function e(t){i(this,e),this._type=t,this._list=[],this._lastAppendLocation=-1}return r(e,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(e){var t=this._list;if(0===t.length)return-2;var n=t.length-1,i=0,r=0,o=n,a=0;if(e<t[0].originalBeginDts)return a=-1;for(;r<=o;){if((i=r+Math.floor((o-r)/2))===n||e>t[i].lastSample.originalDts&&e<t[i+1].originalBeginDts){a=i;break}t[i].originalBeginDts<e?r=i+1:o=i-1}return a}},{key:"_searchNearestSegmentAfter",value:function(e){return this._searchNearestSegmentBefore(e)+1}},{key:"append",value:function(e){var t=this._list,n=e,i=this._lastAppendLocation,r=0;-1!==i&&i<t.length&&n.originalBeginDts>=t[i].lastSample.originalDts&&(i===t.length-1||i<t.length-1&&n.originalBeginDts<t[i+1].originalBeginDts)?r=i+1:t.length>0&&(r=this._searchNearestSegmentBefore(n.originalBeginDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,n)}},{key:"getLastSegmentBefore",value:function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}},{key:"getLastSampleBefore",value:function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null}},{key:"getLastSyncPointBefore",value:function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&t>0;)t--,n=this._list[t].syncPoints;return n.length>0?n[n.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),e}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(){p=new o.default(y),p.onInitSegment=n,p.onMediaSegment=i,p.onError=r,p.onMediaInfo=a,p.onCdnDropFrame=c,p.on("error",function(e){self.postMessage({cmd:"error",source:e.data})})}function n(e,t){self.postMessage({cmd:"mediaSegmentInit",source:{type:"video",data:e}}),t&&self.postMessage({cmd:"mediaSegmentInit",source:{type:"audio",data:t}})}function i(e,t){self.postMessage({cmd:"mediaSegment",source:{type:e,data:t}})}function r(e){self.postMessage({cmd:"error",source:e})}function a(e){self.postMessage({cmd:"mediainfo",source:e})}function c(e){self.postMessage({cmd:"cdnDropFrame",source:e})}function f(e){m.seek(e.keyframePoint,!1,e.keyframetime)}function l(){m&&(m.destroy(),v(m),m=null),p&&(p.off("error"),p=null)}function d(e,n,i){return p||t(),i&&p.seek(i),self.postMessage({cmd:"player-event",source:{type:u.PLAYER_EVENTS.MEDIA_DEMUX_FLV,ts:Date.now()}}),p.setflv(e)}function h(){m&&(m.on("end",function(){self.postMessage({cmd:"end"})}),m.on("error",function(e){self.postMessage({cmd:"error",source:e.data})}),m.on("heartbeat",function(e){self.postMessage({cmd:"heartbeat",source:e.data})}),m.on("player-event",function(e){self.postMessage({cmd:"player-event",source:e.data})}))}function v(e){e&&(e.off("end"),e.off("error"),e.off("heartbeat"),e.off("player-event"))}var p=null,m=null,y={};e.addEventListener("message",function(e){switch(e.data.cmd){case"init":y=e.data.data;break;case"loadSource":m=new s.default(y),h(),m.arrivalDataCallback=d,m.open();break;case"pause":m.pause();break;case"seek":f(e.data.keyframe);break;case"resume":m.resume();break;case"destroy":l()}})};var r=n(61),o=i(r),a=n(59),s=i(a),u=n(15)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isLive:!1,box:"flv",seekInKeyframe:!0,alwaysSeekKeyframe:!0,lazyLoadMaxDuration:120,lazyLoadRecoverDuration:30,lockInternalProperty:!1,debug:!0,webWorker:!1,autoCleanupSourceBuffer:!0,autoCleanupMaxBackwardDuration:10,autoCleanupMinBackwardDuration:10,stashSize:393216,seekType:"range"}},function(e,t,n){var i;!function(r,o){"use strict";var a="model",s="name",u="type",c="vendor",f="version",l="mobile",d="tablet",h="smarttv",v={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var n,i,r,o,a,s,u=0;u<t.length&&!a;){var c=t[u],f=t[u+1];for(n=i=0;n<c.length&&!a;)if(a=c[n++].exec(e))for(r=0;r<f.length;r++)s=a[++i],o=f[r],"object"==typeof o&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(v.has(t[n][i],e))return"?"===n?void 0:n}else if(v.has(t[n],e))return"?"===n?void 0:n;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,f],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,f],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],f],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],f],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],f],[/(Avast)\/([\w\.]+)/i],[[s,"Avast Secure Browser"],f],[/(AVG)\/([\w\.]+)/i],[[s,"AVG Secure Browser"],f],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],f],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],f],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],f],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],f],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],f],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],f],[/(qqbrowserlite)\/([\w\.]+)/i],[s,f],[/(QQ)\/([\d\.]+)/i],[s,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,f],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[s,f],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,f],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,f],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,f],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],f],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[f,p.str,m.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",v.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",v.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,c,[u,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[c,"Apple"],[u,d]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[c,"Apple"],[u,h]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,a,[u,d]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[c,"Amazon"],[u,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,p.str,m.device.amazon.model],[c,"Amazon"],[u,l]],[/android.+aft([bms])\sbuild/i],[a,[c,"Amazon"],[u,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,c,[u,l]],[/\((ip[honed|\s\w*]+);/i],[a,[c,"Apple"],[u,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,a,[u,l]],[/\(bb10;\s(\w+)/i],[a,[c,"BlackBerry"],[u,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[c,"Asus"],[u,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[a,"Xperia Tablet"],[u,d]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[c,"Sony"],[u,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[c,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[c,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[c,p.str,m.device.sprint.vendor],[a,p.str,m.device.sprint.model],[u,l]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[a,/_/g," "],[u,l]],[/(nexus\s9)/i],[a,[c,"HTC"],[u,d]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[a,[c,"Huawei"],[u,l]],[/android.+(bah2?-a?[lw]\d{2})/i],[a,[c,"Huawei"],[u,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,a,[u,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[c,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[c,"Microsoft"],[u,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[c,"Motorola"],[u,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[c,"Motorola"],[u,d]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,v.trim],[a,v.trim],[u,h]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[c,"Samsung"],[u,h]],[/\(dtv[\);].+(aquos)/i],[a,[c,"Sharp"],[u,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],a,[u,d]],[/smart-tv.+(samsung)/i],[c,[u,h],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],a,[u,l]],[/sie-(\w*)/i],[a,[c,"Siemens"],[u,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],a,[u,l]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[c,"Acer"],[u,d]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[c,"LG"],[u,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],a,[u,d]],[/(lg) netcast\.tv/i],[c,a,[u,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[c,"LG"],[u,l]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[c,a,[u,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[c,"Lenovo"],[u,d]],[/(lenovo)[_\s-]?([\w-]+)/i],[c,a,[u,l]],[/linux;.+((jolla));/i],[c,a,[u,l]],[/((pebble))app\/[\d\.]+\s/i],[c,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,a,[u,l]],[/crkey/i],[[a,"Chromecast"],[c,"Google"],[u,h]],[/android.+;\s(glass)\s\d/i],[a,[c,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[c,"Google"],[u,d]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[a,[c,"Google"],[u,l]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,l]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,d]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[c,"Meizu"],[u,l]],[/(mz)-([\w-]{2,})/i],[[c,"Meizu"],a,[u,l]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[a,[c,"OnePlus"],[u,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[c,"RCA"],[u,d]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[c,"Dell"],[u,d]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[c,"Verizon"],[u,d]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],a,[u,d]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[c,"NuVision"],[u,d]],[/android.+;\s(k88)\sbuild/i],[a,[c,"ZTE"],[u,d]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[c,"Swiss"],[u,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[c,"Swiss"],[u,d]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[c,"Zeki"],[u,d]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],a,[u,d]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[c,"Insignia"],[u,d]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[c,"NextBook"],[u,d]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],a,[u,l]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],a,[u,l]],[/android.+;\s(PH-1)\s/i],[a,[c,"Essential"],[u,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[c,"Envizen"],[u,d]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,a,[u,d]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[c,"MachSpeed"],[u,d]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,a,[u,d]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[c,"Rotor"],[u,d]],[/android.+(KS(.+))\s+build/i],[a,[c,"Amazon"],[u,d]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,a,[u,d]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,v.lowerize],c,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[u,h]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,f],[/rv\:([\w\.]{1,9}).+(gecko)/i],[f,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[f,p.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[f,p.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],f],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],f],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,f],[/(haiku)\s(\w+)/i],[s,f],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,f]]},g=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof g))return new g(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?v.extend(y,t):y;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,i.browser),e.major=v.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};g.VERSION="0.7.21",g.BROWSER={NAME:s,MAJOR:"major",VERSION:f},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:a,VENDOR:c,TYPE:u,CONSOLE:"console",MOBILE:l,SMARTTV:h,TABLET:d,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:s,VERSION:f},g.OS={NAME:s,VERSION:f},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):void 0!==(i=function(){return g}.call(t,n,t,e))&&(e.exports=i);var b=r&&(r.jQuery||r.Zepto);if(b&&!b.ua){var _=new g;b.ua=_.getResult(),b.ua.get=function(){return _.getUA()},b.ua.set=function(e){_.setUA(e);var t=_.getResult();for(var n in t)b.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";function i(e){function t(i,r,o){if(Object(p.b)(i)||Object(p.r)(i)){r=Object(p.t)(r)?Object(p.r)(i)?{}:[]:r;for(var a in i)n(r,a,t(i[a],r[a],a));return r}return e(i,r,o)}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t,n){e[t]=n};return t}function r(e){if(Object(p.t)(e))throw new TypeError("deepClone only accept non primitive type");return m(e)}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var i=t.length-1;i>-1;i--)if(Object(p.t)(t[i]))throw new TypeError("deepAssign only accept non primitive type");var r=t.shift();return t.forEach(function(e){return m(e,r)}),r}function a(e,t){return e.replace(/(^|[^a-zA-Z]+)([a-zA-Z])/g,function(e,n,i,r){return t||0!==r?i.toUpperCase():i.toLowerCase()})}function s(e){return a(e).replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function u(e,t){return e.bind?e.bind(t):e.apply?function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(t,i)}:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.call.apply(e,[t].concat(v()(i)))}}function c(){return f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()}function f(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function l(e){for(var t="";t.length<e;)t+=f();return t.slice(0,e)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.throwError,r=void 0!==i&&i,o=n.backup;if(Object(p.w)(t)&&(t=t.split(".")),!Object(p.b)(t))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var a=[],s=e,u=0,c=t.length;u<c;u++){var f=t[u];if(Object(p.y)(s)){if(r)throw new Error("obj"+(a.length>0?"."+a.join("."):" itself")+" is "+s);return o}s=s[f],a.push(f)}return s}n.d(t,"f",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"h",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"j",function(){return c}),n.d(t,"a",function(){return f}),n.d(t,"i",function(){return l}),n.d(t,"g",function(){return d});var h=n(66),v=n.n(h),p=n(13),m=i(function(e){return e})},function(e,t,n){n(29),n(144),e.exports=n(0).Array.from},function(e,t,n){"use strict";var i=n(17),r=n(2),o=n(22),a=n(67),s=n(68),u=n(34),c=n(145),f=n(69);r(r.S+r.F*!n(71)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,l,d=o(e),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,m=void 0!==p,y=0,g=f(d);if(m&&(p=i(p,v>2?arguments[2]:void 0,2)),void 0==g||h==Array&&s(g))for(t=u(d.length),n=new h(t);t>y;y++)c(n,y,m?p(d[y],y):d[y]);else for(l=g.call(d),n=new h;!(r=l.next()).done;y++)c(n,y,m?a(l,p,[r.value,y],!0):r.value);return n.length=y,n}})},function(e,t,n){"use strict";var i=n(5),r=n(18);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){e.exports={default:n(147),__esModule:!0}},function(e,t,n){n(55),n(29),n(53),n(148),n(156),n(157),e.exports=n(0).Promise},function(e,t,n){"use strict";var i,r,o,a,s=n(16),u=n(1),c=n(17),f=n(70),l=n(2),d=n(8),h=n(24),v=n(149),p=n(150),m=n(73),y=n(74).set,g=n(152)(),b=n(46),_=n(75),w=n(153),k=n(76),S=u.TypeError,E=u.process,x=E&&E.versions,T=x&&x.v8||"",O=u.Promise,A="process"==f(E),R=function(){},M=r=b.f,D=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(R,R)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(R)instanceof t&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),B=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},C=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var i=e._v,r=1==e._s,o=0;n.length>o;)!function(t){var n,o,a,s=r?t.ok:t.fail,u=t.resolve,c=t.reject,f=t.domain;try{s?(r||(2==e._h&&P(e),e._h=1),!0===s?n=i:(f&&f.enter(),n=s(i),f&&(f.exit(),a=!0)),n===t.promise?c(S("Promise-chain cycle")):(o=B(n))?o.call(n,u,c):u(n)):c(i)}catch(e){f&&!a&&f.exit(),c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){y.call(u,function(){var t,n,i,r=e._v,o=I(e);if(o&&(t=_(function(){A?E.emit("unhandledRejection",r,e):(n=u.onunhandledrejection)?n({promise:e,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=A||I(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},I=function(e){return 1!==e._h&&0===(e._a||e._c).length},P=function(e){y.call(u,function(){var t;A?E.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=B(e))?g(function(){var i={_w:n,_d:!1};try{t.call(e,c(N,i,1),c(j,i,1))}catch(e){j.call(i,e)}}):(n._v=e,n._s=1,C(n,!1))}catch(e){j.call({_w:n,_d:!1},e)}}};D||(O=function(e){v(this,O,"Promise","_h"),h(e),i.call(this);try{e(c(N,this,1),c(j,this,1))}catch(e){j.call(this,e)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(154)(O.prototype,{then:function(e,t){var n=M(m(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=A?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=c(N,e,1),this.reject=c(j,e,1)},b.f=M=function(e){return e===O||e===a?new o(e):r(e)}),l(l.G+l.W+l.F*!D,{Promise:O}),n(26)(O,"Promise"),n(155)("Promise"),a=n(0).Promise,l(l.S+l.F*!D,"Promise",{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(s||!D),"Promise",{resolve:function(e){return k(s&&this===a?O:this,e)}}),l(l.S+l.F*!(D&&n(71)(function(e){O.all(e).catch(R)})),"Promise",{all:function(e){var t=this,n=M(t),i=n.resolve,r=n.reject,o=_(function(){var n=[],o=0,a=1;p(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=M(t),i=n.reject,r=_(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(17),r=n(67),o=n(68),a=n(7),s=n(34),u=n(69),c={},f={},t=e.exports=function(e,t,n,l,d){var h,v,p,m,y=d?function(){return e}:u(e),g=i(n,l,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>b;b++)if((m=t?g(a(v=e[b])[0],v[1]):g(e[b]))===c||m===f)return m}else for(p=y.call(e);!(v=p.next()).done;)if((m=r(p,g,v.value,t))===c||m===f)return m};t.BREAK=c,t.RETURN=f},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(1),r=n(74).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,u="process"==n(21)(a);e.exports=function(){var e,t,n,c=function(){var i,r;for(u&&(i=a.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var f=s.resolve(void 0);n=function(){f.then(c)}}else n=function(){r.call(i,c)};else{var l=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){var i=n(1),r=i.navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var i=n(9);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t,n){"use strict";var i=n(1),r=n(0),o=n(5),a=n(6),s=n(3)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var i=n(2),r=n(0),o=n(1),a=n(73),s=n(76);i(i.P+i.R,"Promise",{finally:function(e){var t=a(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var i=n(2),r=n(46),o=n(75);i(i.S,"Promise",{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function i(e,t){return e.getAttribute(t)}function r(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n)}function o(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.add(t)});else{var i=" "+(e.className||"")+" ";n.forEach(function(e){-1===i.indexOf(" "+e+" ")&&(i+=" "+e)}),e.className=i.trim()}}}function a(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach(function(t){return e.classList.remove(t)});else{var i=" "+e.className+" ";n.forEach(function(e){for(var t=" "+e+" ";-1!==i.indexOf(t);)i=i.replace(t," ")}),e.className=i.trim()}}}function s(e,t){return new RegExp("(?:^|\\s)"+t+"(?=\\s|$)").test(e.className)}function u(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==r&&!Object(T.d)(r)&&B&&(r={passive:!0}),i){var o=Object(O.removeEventCache)(e,t+"_once",n);o&&(n=o)}e.removeEventListener(t,n,r)}function c(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==r&&!Object(T.d)(r)&&B&&(r={passive:!0}),i){var o=n;n=function(){return function(){for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];o.apply(this,s),u(e,t,n,i,r)}}(),Object(O.addEventCache)(e,t+"_once",o,n)}e.addEventListener(t,n,r)}function f(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==r&&!Object(T.d)(r)&&B&&(r={passive:!0});var o=function(n){var r=m(n.target||n.srcElement,e,!0),o=v(t,e,!0),a=void 0;o.find?a=o.find(function(e){return r.find(function(t){return e===t})}):o.forEach(function(e){return!a&&r.forEach(function(t){a||e!==t||(a=t)})}),a&&i.apply(a,arguments)};Object(O.addEventCache)(e,n+"_delegate_"+t,i,o),e.addEventListener(n,o,r)}function l(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==r&&!Object(T.d)(r)&&B&&(r={passive:!0});var o=Object(O.removeEventCache)(e,n+"_delegate_"+t,i);o&&e.removeEventListener(n,o,r)}function d(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,null))[t]||e.style[t]}function h(e,t,n){if(Object(T.r)(t))for(var i in t)h(e,i,t[i]);else e.style[t]=n}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],i=t.querySelectorAll(e);return n?x()(i):i}function p(e){e.parentNode.removeChild(e)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],i=arguments[3],r=[];for(n&&r.push(e);e&&e.parentNode!==t;)(e=e.parentNode)&&r.push(e);return i&&r.push(t),r}function y(e,t){return e.constructor===L?e:new L(e,t)}n.d(t,"g",function(){return i}),n.d(t,"o",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"k",function(){return a}),n.d(t,"i",function(){return s}),n.d(t,"q",function(){return B}),n.d(t,"n",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return f}),n.d(t,"l",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"p",function(){return h}),n.d(t,"j",function(){return v}),n.d(t,"m",function(){return p}),n.d(t,"f",function(){return m}),n.d(t,"b",function(){return L}),n.d(t,"a",function(){return y});var g=n(56),b=n.n(g),_=n(41),w=n.n(_),k=n(42),S=n.n(k),E=n(45),x=n.n(E),T=n(13),O=n(4),A=n(72),R=A.h?document.createElement("div"):{},M="innerText";"textContent"in R&&(M="textContent");var D=Array.prototype,B=!1;try{var C=Object.defineProperty({},"passive",{get:function(){B=!0}});A.h&&window.addEventListener("test",null,C)}catch(e){console.error(e)}var L=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;w()(this,e);var i=this;i.selector=t;var r=void 0;t&&t.constructor===NodeList?r=Object(A.i)(t):Object(T.b)(t)?r=t:Object(T.w)(t)?0===t.indexOf("<")?(R.innerHTML=t,r=v("*",R,!0)):r=v(t,n,!0):r=[t],b()(i,r),i.length=r.length}return S()(e,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return D.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return D.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return y(D.splice.apply(this,t))}},{key:"find",value:function(e){var t=[];this.each(function(n){t=t.concat(v(e,n,!0))});var n=y(t);return n.parent=this,n.selector=e,n}},{key:"append",value:function(e){var t=y(e),n=this[0];return t.each(function(e){return n.appendChild(e)}),this}},{key:"appendTo",value:function(e){return y(e).append(this),this}},{key:"text",value:function(e){return 0===arguments.length?this[0][M]:this.each(function(t){t[M]=e})}},{key:"html",value:function(e){return 0===arguments.length?this[0].innerHTML:this.each(function(t){t.innerHTML=e})}},{key:"attr",value:function(e,t){return 1===arguments.length?i(this[0],e):this.each(function(n){return r(n,e,t)})}},{key:"data",value:function(e,t){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[e]:this.each(function(n){(n.dataset||(n.dataset={}))[e]=t})}},{key:"css",value:function(e,t){return 1!==arguments.length||Object(T.r)(e)?this.each(function(n){return h(n,e,t)}):d(this[0],e)}},{key:"addClass",value:function(e){return this.each(function(t){return o(t,e)})}},{key:"removeClass",value:function(e){return this.each(function(t){return a(t,e)})}},{key:"hasClass",value:function(e){return s(this[0],e)}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return c(r,e,t,n,i)})}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return u(r,e,t,n,i)})}},{key:"delegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return f(r,e,t,n,i)})}},{key:"undelegate",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each(function(r){return l(r,e,t,n,i)})}},{key:"remove",value:function(){return this.each(function(e){return p(e)})}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(65),u=n(15),c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.reset(),e}return o(t,e),a(t,[{key:"reset",value:function(){this.loaderOpenTs=0,this.receiveFirstPackageTs=0,this.firstDemuxFlvTs=0,this.firstSegmentTs=0,this.firstPlay=0}},{key:"record",value:function(e){e.ts=e.ts||Date.now(),this.firstPlay||this.processFirstPlayData(e)}},{key:"processFirstPlayData",value:function(e){switch(e.type){case u.PLAYER_EVENTS.LOADER_CHUNK_ARRIVAL:this.receiveFirstPackageTs||(this.receiveFirstPackageTs=e.ts,this.emit("performance",{type:"receive-first-package-duration",value:this.receiveFirstPackageTs-this.loaderOpenTs}));break;case u.PLAYER_EVENTS.MEDIA_DEMUX_FLV:this.firstDemuxFlvTs||(this.firstDemuxFlvTs=e.ts,this.emit("performance",{type:"first-flv-package-duration",value:this.firstDemuxFlvTs-this.receiveFirstPackageTs}));break;case u.PLAYER_EVENTS.MEDIA_SEGMENT:this.firstSegmentTs||(this.firstSegmentTs=e.ts,this.emit("performance",{type:"first-flv-to-mp4",value:this.firstSegmentTs-this.firstDemuxFlvTs}));break;case u.PLAYER_EVENTS.LOADER_OPEN:this.loaderOpenTs||(this.loaderOpenTs=e.ts,this.emit("performance",{type:"first_loader_open_timestamp",value:this.loaderOpenTs}));break;case u.PLAYER_EVENTS.PLAYING:case u.PLAYER_EVENTS.CANPLAY:case u.PLAYER_EVENTS.TIMEUPDATE:this.firstPlay||(this.firstPlay=e.ts,this.emit("performance",{type:"first_video_frame_duration",value:this.firstPlay-this.firstSegmentTs}))}}}]),t}(s.CustEvent);t.default=c}]).default});